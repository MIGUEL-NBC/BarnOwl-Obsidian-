{"path":"PDF Library/30 Rock Production Engineering - Product Manuals/Sony/8000X/Maintenance/8A_mve8000a_detailed_serviceTraining_ab_New.pdf","text":"MVE-8000A Service Training Overall 1 External Dimensions and Power W440 x H87.5(2U) x D520 Current Consumption 100V = 2.8A MAX In Rush Current = 15A @100V W17.32 x H3.445(1U) x D20.47 in inches 2 3 4 5 Agenda ◇ Feature ◇ DME Comparison Chart ◇ Board Configuration ◇ Overall Block ◇ Input/Output ◇ Trouble Shooting 6 Feature 1  Successor MVE-8000  Compact System & Low Cost  Realizes DME 2CH Effect with only a DVP-30 mount board (MVE-8000:1ch/DVP-21)  2RU (MVE-8000:5RU)  Effects  MVE-8000 equal effect ＋ Metal/Sketch/Glow/Mask  Input Freeze exclusive Memory is mounted (MVE-8000:Interpolation Memory is shared)  Recursive Memory 4ch equal is mounted (MVE-8000:2ch equal is mounted ) 7 Feature 2  SDI Interface available  4ch Video,Key In/Out, Monitor Out x4 (MVE-8000:Dedicated only)  Redundant Power Supply Unit  HK-PSU02 (MVE-8000:not compatible)  Editor Port 4CH is equipped (MVE-8000:2CH) 8 DME Comparison Chart 1 SONY SONY SONY SONY MVE-8000A MVE-8000 MVE-9000 DME-7000 Type Standalone / Intg Integrated Standalone / Intg Standalone Signal Format HD&SD HD & SD HD&SD SD Physical Size 2RU 5RU 4RU 5RU Channel per Unit 4 4 4 1 Max Channel per Swicther 8 8 8 4 Signal Processing(Y/C/K) 10/10/10 10/8/10 10/10/10 10/10/10 Process Interpolation 4×4/2×2(HD) 4×4/2×2(HD) 8×8/4×4(HD) 8×8 Field/Frame Processinhg Frame/Filed(HD) Frame/Filed(HD) Frame Frame Anti Alias Filter Flat Flat Pixcel Pixcel Input/Output Interface Dedicated & SDI I/O Dedicated Dedicated & SDI I/O SDI Edirot Interface Yes(4ports) Yes(1port) Yes(4ports) Yes(1port) 9 DME Comparison Chart 2 SONY SONY SONY SONY MVE-8000A MVE-8000 MVE-9000 DME-7000 3D (Linear and Non-linear) Yes Yes Yes Yes Digital Sparkle Effects Yes Yes Yes Yes Digital Sketch Effects Yes No Yes Yes Duality Yes(2CH) Yes(2CH) Yes(2CH) Yes BKGD&Edge Yes Yes Yes Yes Beveled Edge Yes Yes Yes Yes Drop Shadow Yes(2CH) Yes(2CH) Yes(2CH) Yes 3D Drop Shadow Yes(2CH) Yes(2CH) Yes(2CH) Yes Freeze＆Recursive Yes Yes Yes Yes Effects Defocus Yes(2CH) Yes(2CH) Yes(2CH) Yes Defocus Mach Cancel Yes Yes Yes Yes Defocus Mask Yes No Yes Yes Video Modifier Yes Yes Yes Yes Lighting Yes Yes Yes Yes Brick Yes(3CH) Yes(3CH) Yes(3CH) Yes Combiner Max 4CH Max 3CH Max 4CH Max 4CH Intersect No No Yes Yes Color Correction No No No Yes Metal Yes No Yes Yes Glow Yes No Yes Yes Key Border No No Yes Yes Texture Light No No Yes No Art Edge No No Yes No Flex Shadow No No Yes No 10 Board Configuration1 Control & Communication CN-2356, CN-2488: standard SLOT 3, 4 HK-PSU02 DVP-30A: MKE-8040A, SLOT 2,3 CA-54CFC: standard, SLOT 4 MVS-I/F CN-2153 : MKE-8020A SLOT 1(CH1,2,3,4) choise IF-961:standard 2U chassis new new SDI I/O with Moni ： CN-2585, IF-962 MKE-8021A SLOT 1,2 (CH1,2,3,4) VIF-32:standard, SLOT 1 new 11 Overall Block CN- 2153 2/2 CN-2585 2/2 IF-962 2/2 CN-2153 1/2 DVP-30 MKE-8040A Sub CPU PLL ADRS CL PVM FLTR INTP MIX DVP-30 MKE-8040A Sub CPU PLL ADRS CL PVM FLTR INTP MIX VIF-32 CN-2488 VMIX (EP1S40) Other LVDS SDI TBC CH1 (1/2) CA-54CFA PLL CN-2356 Main CPU SGSIO GPI GPI Editor Port Editor Port Cont LAN Data LAN Comm CPU 2 CF Comm CPU 1 REF IN MIF CL Sub CPU V/K 1,2 CL CL V/K 3,4 V/K 3,4 V/K 3,4 V/K1,2 V/K 1,2 IF-961 (Debug port & Indicator only) new new V/K In:3,4 V/K in:1,2 V/K Out: 3,4 V/K Out: 1,2 MKE-8020A MVS-I/F Opt. MKE-8020A MVS-I/F TBC CH2 (1/2) TBC CH3 (1/2) TBC CH4 (1/2) TBC CH1 (2/2) TBC CH2 (2/2) TBC CH3 (2/2) TBC CH4 (2/2) CN-2585 1/2 V/K in:1,2 V/K In:3,4 IF-962 1/2 V/K Out:1,2 V/K Out:3,4 EQ DRV Moni Out:1,2 Moni Out:3,4 DRV → MIF P/S CL Moni Out:3,4 Moni Out:1,2 MIF CL PLL MIF CL CL CL CLCL CL CL CLCL CLCL MIF CL MIF CL MIF CL MKE-8021A SDI I/O Opt. P/S → MIF P/S CL P/S DRV DRV MKE-8021A SDI I/O Opt. new → → S/P TBC MIF CL → → S/P TBC MIF CL new 1. CA-54CFC Board The CA-54CFC board has the following functions. · Generate clock and timing signals synchronized with the reference signal and send them to the other boards. · Control LAN (connector “CTRL”)/Data LAN (connector “DATA”) data communication. · RS-422 data communication (connectors “REMOTE1 to 4”) · GPI input/output · Application software control and data management · Total system control The CA-54CFC board consists of the following boards. · CA-54CFC board itself · SG-272 board · DIF-130 board · SIO-25EF board · Main CPU module (CPU-DR or CPU-DT) · CPU-DK module for Control LAN (COM CPU-1) · CPU-DK module for Data LAN (COM CPU-2) The CA-54CFC board has three CPU modules: a main CPU module (CPU-DR or CPU-DT) for total control of the system and for GPI input/output, and two CPU-DK modules for data communication with the Control LAN (connector “CTRL”) and Data LAN (connector “DATA”). Each CPU-DK module is equipped with two RS-422 communication ports. The total system control is performed through the local CPUs and the Dual Port RAMs on the DVP-30A and VIF-32 boards. The CA-54CFC board itself executes the functions of the above-described child boards and modules, and outputs various kinds of information (such as FAN ERR signal, power information, reference signal information, and communication-related information) to the other boards for indicator display or as output data. The CA-54CFC board also supports Ethernet and RS-422 data communications. The DIP switches S102 and S103 on this board are used for setting ID (IP address, etc.) and other items. Power voltages 12 V, 5 V, and 3.3 V are supplied to each block. The SG-272 board mounted on the CA-54CFC board mainly generates horizontal sync pulse HD and vertical sync pulse VD, field information FLOE, register load pulse CKX, clock signal HFCK, and analog reference signals that are synchronized with the external reference signals. The main processor (IC113) that controls the functions of this board is automatically programmed by the PROM (IC302) when the power is turned on. The processor is controlled by the main CPU that rewrites its register through the local bus to change the reference signal phase and the output signal phase. The SG-272 board supports both the HD (1080i) and SD (525/625) signal formats. The reference signal status can be monitored with the LEDs (D100, 101, 200) on this board and with the LEDs (D601, 602) on the CA-54CFC board. This board also generates power voltages 5 V, 3.3 V, and 1.8 V from the 12 V supplied by the CA-54CFC board. The DIF-130 board mounted on the CA-54CFC board has functions to interface with and to control the compact flash card on this board. The flash card contains the MVE system program and the configuration data of the FPGAs mounted on each board. The DIF-130 board is controlled by the CPU-DK module (COM CPU 2) on the CA-54CFC board through the PCI bus. The controller (IC1) on this board takes charge of the interface and control between the PCI bus and the flash card. This board is equipped with sockets A and B for compact flash cards. The compact flash card that stores data required to start up the MVE system is always inserted into the socket A. The socket B is reserved for data copying or other purposes. The 3.3 V power is supplied from the CA-54CFC board. The SIO-25EF board mounted on the CA-54CFC board performs RS-422 data communication using the 4-channel SIO controller (IC102, 111, 118, 126). The SIO controller sends/receives data to/from the main CPU through the Dual Port RAM (IC101, 110, 117, 125) for parallel-to-serial and serial-to-parallel data conversions. 12 Input/Output LVDS MVS (CH 1-4) HD/SD SDI Input (V/K) 1 4 Analog B.B. / Tri-level Sync Output (V/K) HD/SD SDI Tally GPI x 8 External Ref. Loop-through Moni 4 Moni 1 x 4 HD/SD SDI HD/SD SDI HD/SD SDI Control LAN Data LAN Ethernet Ethernet RS-422A Editor,AUX HD/SD SDI 1 1 4 4 choice MKE-8020A MVE-8000A x 16 MKE-8021A 13 Trouble Shooting (1 / 3) ◇ Case of no operation, although picture appears 1. Confirmation of the Communication ・The software version is visible on the control panel ? Case version appears ： The communication is OK → Confirm that software version of each device is matched. → Confirm if the outputted picture is rightly observed as selected CH of MVE. → Confirm that the Panel is normal on the functions of SW’er Case version does not appear ：The communication is NG → Confirm that the status of CPU mount board 7 SEG LED is normal → Confirm that the status of CPU mount board Comm LED is normal → Confirm that the cables are connected to Control LAN and Data LAN → Confirm that LAN cable is normal 14 Trouble Shooting (2 / 3) ◇ Case of abnormal picture 1. Confirm that version, format and Ref. of each device ・Confirm that the version or format on the Panel ・Confirm that Ref. at LED of CPU mount board 2. Confirm that the status of each device ・Confirm if 7 SEG LED works normally → In case of the abnormal status, repower after taking memo the status of 7 SEG. ・Confirm that the electric power of each mound board is normal. 3. Replace DVP mount board of defective CH ・Confirm that the symptom reproduces after replacing the DVP-30 mount board →If the problem reproduces, it’s a defect of the mount board. →If the problem does not reproduce, a defect of VIF-32 mount board or MKE-8021A/8020A is suspected. 15 Trouble Shooting (3 / 3) ◇ Confirmation of MVS Processor 1. Confirm that Red LED Lighting of a mount board 2. Confirm the Interface between MVE and MVS Processor.  Case of MKE-8021A SDI I/F： Exchange the MVE connection route to other route.  Case of MKE-8020A MVS exclusive Interface ： Confirm that a picture appears normally, to loop back the Interface cable on MVS side. For instance, exchange I/F cable 1-2 and 3-4 on MVS side. The relationship of IN/OUT is 1→3、3→1、2→4、4→2 Case of abnormal: >SW’er side NG >MVE I/F mount board, DIF-**** is suspected. 16 MVE-8000A Service Training DVP-30A Board 17 Agenda  Features  Video Signal Interface  Board Layout  Video Signal Flow  FPGA Function  Control System  Power Supply  Timing Signal  Indicator & Debug port 18 Features 1. DME Effect Board of MVE-8000A  Same part as with MKS-2470 (MFS-2000) DVP-30 mount board is used.  However, it has different Suffix A number by difference of software and Hardware Data.  To realize 4 Ch combine, the combine function is performed on VIF-32 mount board.  DVP-30 mount board is uses VIF-32 side mount board in MVE-8000A. 2. 2CH DME Process DVP-30 has 2CH DME process 3. HD/SD Video Format 4. Dual SUB CPU Structure DVP-30 has Dual SUB CPUs for Effect Control 19 Video Signal Interface 1. Board to Board Channel-Link  Receiver : THC63LVDF84  Transmitter : THC63LVDM83 Interface with VIF-32 2. FPGA to FPGA Source Synchronous Interface  Transmit with clock  High speed and no error interface: 600Mbps/1pair  Adjust clock phase whenever booting up 20 Board Layout PVM MIX FILTER INTP ADRS DCDC +1.5V-1 DCDC +2.5V-1 DCDC +1.5V-2 DCDC +2.5V-2 DCDC +3.3V SUB CPU B FPGA IF BOOT PLD SUB CPU A ZBT SRAM ZBT SRAM ZBT SRAM ZBT SRAM ZBT SRAM ZBT SRAM ZBT SRAM ZBT SRAM ZBT SRAM ZBT SRAM ZBT SRAM ZBT SRAM DDR SDRAM DDR SDRAM DDR SDRAM DDR SDRAM DDR SDRAM DDR SDRAM DDR SDRAM DDR SDRAM DDR SDRAM DVP-30A Board The DVP-30A board consists of a control block and a signal processing block. The control block consists of the sub CPU A (CPU-DR or CPU-DT) and the sub CPU B (CPU-DR or CPU-DT). Each sub CPU receives commands from the main CPU (CA-54CFC board) through the Dual Port RAM (IC1101, 1201) to control the signal processing block through the boot PLD (IC108). The FPGAs of both sub CPUs are controlled through the FPGA IF (IC107). Whether to choose sub CPU A or sub CPU B to perform the processing depends on the type of effect. These sub CPUs start up by booting the flash memory in the module, and then run the applications upon the second boot of the booting flash memory (IC1301, 1302) on this board. The boot PLD performs configuration of the other FPGAs on this board using the address decoding to the peripheral devices of the sub CPUs and the configuration data stored in the configuration flash memory (IC1303, 1304) under the control of the sub CPU A. Configuration data and applications to be stored in the flash memory are refreshed during the installation performed by the compact flash card of the main CPU. 21 Video Signal Flow CL DEC PVM (FPGA) DDR SDRAM FILTER (FPGA) INTP (FPGA) MIX (FPGA) CL ENC ADRS (FPGA) DDR SDRAM DDR SDRAM ZBT SRAM ZBT SRAM From VIF-32 to VIF-32 Y C x 2ch K Y C x 2ch K CH Link Signals Source Synchronous Signals 300MHz SSTL2 Signals 150MHz 2.5V LVTTL Signals 75MHz 3.3V LVTTL Signals The signal processing block comprises five FPGAs: Pre Video Modify (PVM), Filter (FILTER), Address Generator (ADRS), Interpolator (INTP), and Mixer (MIX). The short names in parentheses ( ) are used in the description below. The respective FPGAs have the following main functions. (1) PVM (IC1) · Border/crop/beveled edge · Video modify (posterization, solarization, mosaic, etc.) · Input freeze · Mask key generation (2) FILTER (IC2) · Antialias filter (horizontal/vertical directions) · Scan conversion · Field/frame conversion · Defocus/blur · Through image processing for mask (3) ADRS (IC3) · 3D linear transform · Non-linear processing (4) INTP (IC4) · Interpolation · Lighting (5) MIX (IC5) · Recursive processing (single channel) The signal flows are as follows: The video and key signals of the main signal line are transmitted using the LVDS technology from the VIF-32 board to the LVDS receivers (IC1901 to 1903), and are then sent to PVM. In PVM, the video/key signals receive input freeze, video modify, and border/crop/beveled edge processing using the DDR SDRAM (IC2301, 2302), and are then transferred to FILTER. In FILTER, the signals receive filtering (antialias filter) in accordance with the defocus/blur in the horizontal direction first and with the reduction ratio. Then the signals receive re-arrangement (scan conversion) using the DDR SDRAM (IC2401, 2402), and also receive defocus/blur in the vertical direction and antialias filtering. The signals further receive Field/Frame Conversion using the DDR SDRAM (IC2501, 2502). The output data is sent to INTP to be stored in the ZBT SRAM. In ADRS, addresses for 3D linear transform and non-linear addresses are generated and transferred to INTP. In INTP, data is read from the ZBT SRAM at the address determined by ADRS, and the internal insertion processing is performed. The video and key signals to which interpolation processing has been applied are sent to MIX for lighting mixture using the light key generated by INTP. In MIX, recursive processing using the DDR SDRAM (IC3401, 3402) is performed for the video/key signals for programs to be transmitted to the VIF-32 board from the LVDS transmitters (IC2201 to 2203) using the LVDS technology. 22 FPGA Function 1. PVM Input TBC Border/Crop/Beveled Edge Video Modify (Posterization, Solarization, Mosaic etc.) Input Freeze Mask Key Generate Advanced Video Modify (Sketch, Metal, etc.) 2. FILTER Anti-alias Filter (horizontal and vertical) Scan Conversion Field/Frame Conversion Defocus/Blur Mask process 23 3. ADRS 3D Linear Transform Non-linear 4. INTP Interpolation Lighting Overlap Combine(SD Format) 2ch Priority Combine 5. MIX Single Channel Recursive (Trail, MotionDecay, KeyframeStrobe) Target Shadow FPGA Function 24 Control System(1/2) DP RAM SUB CPU A SUB CPU B FPGA IF (FPGA) BOOT PLD from CA-54 Addr Data CTLs COM B Reset EEPROM DP RAM BUF BUF FLASH BUF & DRV BUF & DRV SWs, LEDs SWs, LEDs BUF Configuration Data for FPGAs Read and Write FPGA Registers for Effect Control COM A Reset USB EEPROM FLASH FLASH FLASH Boot Boot FPGA Config. Spare 25 Control System(2/2) Dual CPU Structure Communicate with Main CPU(CA-54) via DPRAM Boot PLD decode local address  Flash, 7SEG, FPGA_IF and so on Flash Memory x 4 For Boot & Application Software: x2 For FPGA Configuration Data : x2 FPGA Configuration CPU_A configure 6 FPGAs via BOOT_PLD  FPGA_IF, PVM, FILTER, ADRS, INTP, MIX BOOT_PLD: nonvolatile Effects Control 2 SUB CPU Share Effect Functions Read/Write FPGA registers via FPGA_IF Control data is synchronized with SUB CPU Clock 26 Power Supply FUSE DC-DC +1.5V DC-DC +1.5V DC-DC +2.5V DC-DC +2.5V DC-DC +3.3V Core PS of Stratix (PVM, FILTER) Core PS of Stratix (MIX, INTP, ADRS) DDR SDRAM(PVM,FILTER), I/O PS of Stratix(PVM,FILTER) Core PS of SpartanⅡ (FPGA_IF), ZBT SRAM (INTP,ADRS), DDR SDRAM(MIX), I/O PS of Stratix(MIX,INTP,ADRS) Clock Distribution, CH-LINK, SUB CPU Control, I/O PS of Stratix(PVM,FILTER,MIX,INTP,ADRS) +1.5V-1 +1.5V-2 +3.3V +2.5V-1 +2.5V-2 +12V LP2995 LP2995 LP2995 DDR VREF and VTT for PVM DDR VREF and VTT for FILTER DDR VREF and VTT for MIX +1.25VR-P, VT-P +1.25VR-F, VT-F +1.25VR-M, VT-M 10A UPC2918 VCC for Boot PLD +1.8V 27 Timing Signal Clock  LVDS receive from SG on CA board  x2 PLL  input: HD : 37.125 MHz, SD : 27 MHz  internal Clock : HD: 74.25 MHz, SD : 54 MHz Timing Signal  LVDS receive from SG on CA board  Distributed to each FPGA after being synchronized with the internal clock LVDS RECEIVER LVDS RECEIVER BUFFER PLL & BUFFER HFCK FD,VD,HD,CKX from CA-54 from CA-54 HD : 37.125MHz SD : 27MHz Clock for FPGAs Timing for FPGAs HD : 74.25MHz SD : 54MHz x 2 frequency by CY7B9930V 28 Indicator and Debug port(1/3) LEDs, switches and several type of connectors are mounted on the board edge to indicate and monitor system movement. Power Supply LED and TP terminal  LEDs to show that the powers are generated normal.  TP terminals connected with each power supply via of 10k ohm register. USB  An USB terminal port for development. COM A, COM B  RS232C terminal of SUB CPU.  Refer to the following terminal settings.  Baud Rate = 57600  Data = 8bit  Parity = none  Stop = 1bit For more details, please refer to the description on the software. CPU CONFIG  CPU monitor mode switch for development. EPR  Connector terminal connected with PLD and FPGA by JTAG chain.  For the test at manufacturing  For the programming of BOOT_PLD (nonvolatile PLD) 29 Indicator and Debug port(2/3) SYSTEM It is a LED which shows that starting of DVP-30 board was completed. While LED has gone out, an FPGA block is in a reset state. DLKD It is a LED which shows that DLL of VirexII and Spartan2E works correctly. When the clock system is something wrong, this LED lights off and the error message is outputted to COM terminal. Then DLL is reset. RCB DONE It is a LED which shows that the configuration of FPGA has been completed. The information on each configuration is outputted to the COM terminal as a log when starting the system. BOOT DONE It is a LED which shows that BOOT_PLD has been booted up completely. When BOOT_PLD is un-programmed, it lights off. When starting up system, basically the above four LEDs are switched on in order of BOOT PLD -> RCB DONE -> DLKD -> SYSTEM 30 Indicator and Debug port(3/3) DBG0-3 A, DBG0-3 B  TP terminals for debugging. DBG4-7 A, DBG4-7 B  LEDs for debugging. SETUP A, SETUP B  DIP SW for debugging. STATUS A, STATUS B  7 SEG LED which show the status of SUB CPU. For more details on indication, refer to the description on the software. 31 MVE-8000A Service Training MKE-8021A SDI interface 32 Agenda  Features  Video Signal Interface  Board Layout  Video Signal Flow  FPGA Function  Control System  Power Supply  Timing Signal  Indicator & Debug port 33 Feature Input/Output Board of MVE-8000A 1. 4 Channel Video/Key SDI Input and Output  For SDI S/P、P/S, EP1SGX25(StratixGX) is used 2. Input TBC Function  Clock Changing  TBC Window Adjustment Function:available above Software V4.00  In V3.40, realized with VIF-32 TBC FPGA 3. ４ Channel Monitor SDI Output 34 Video Signal Interface 1. SDI I/O Channel-Link(Interface with VIF-32 Video,Key In/Out)  S/P : EP1SGX25(StratixGX)  P/S : EP1SGX25(StratixGX) Channel-Link(Interface with VIF-32 Monitor Output)  Receiver : DS90CR484 2. Board to Board Channel-Link(Interface with VIF-32 Video,Key In/Out)  Receiver : EP1SGX25(StratixGX)  Transmitter : EP1SGX25(StratixGX) Channel-Link(Interface with VIF-32 Monitor Output)  Receiver : DS90CR484 35 Board Layout CN-2585(Slot2) SDIB DCDC +1.5V Ch-link Receiv. IF-962(Slot1) SDIA Driver Driver Driver Driver Driver Driver Driver Driver Driver Driver Driver Driver EQ EQ EQ EQ EQ EQ EQ EQ Timing Signals. Ch-link Receiv. CN-2585 Board / IF-962 Board MKE-8021A consists of the CN-2585 board and the IF-962 board. The CN-2585 and IF-962 boards have HD/SD SDI interface with MVE-8000A and a monitor-out function. These boards receive control and configuration from the VIF-32 board. The video signals are transmitted/received to/from the VIF-32 board using the LVDS technology. Input processing V1 to V4, K1 to K4: The video signals input through the HD/SD SDI interface are converted to LVDS signals in the FPGAs (IC1, IC2), and are then sent to the VIF-32 board. Output processing V1 to 4, K1 to 4: The LVDS video signals sent from the VIF-32 board are serialized by the FPGAs (IC1, IC2), and are then output as HD/SD SDI signals. MONI1 to 4: The LVDS video signals sent from the VIF-32 board are transferred to the channel link deserializers (IC1101, IC1102), are serialized by the FPGAs (IC1, IC2), and are then output as HD/SD SDI signals. 36 Video Signal Flow to VIF-32 V1,K1, V2,K2 IN V x 2ch K x 2ch CH Link Signals 75MHz 3.3V LVTTL Signals CL DEC EQ SDI_A (FPGA) Driv. Driv. V1,K1, V2,K2 OUT MONI1, MONI2 OUT x4 x4 x2 SDI/HD SDI Signals V3,K3, V4,K4 IN CL DEC EQ SDI_B (FPGA) Driv. Driv. V3,K3, V4,K4 OUT MONI3, MONI4 OUT x4 x4 x2 to VIF-32 V x 2ch K x 2ch from VIF-32 V x 2ch K x 2ch from VIF-32 MONI x 2ch from VIF-32 V x 2ch K x 2ch from VIF-32 MONI x 2ch IF-962(Slot1) CN-2585(Slot2) CN-2585(Slot2) 37 FPGA Function 1. SDI_A,B  SDI/HD SDI Video/Key each 2 Channel S/P  Video/Key each 2 Channel Ch-link Encode  Input TBC(TBC Window Adjustment)  Video/Key each 2 Channel Ch-link Decode  SDI/HD SDI Video/Key each 2 Channel P/S  SDI/HD SDI MONITOR2 Channel P/S 38 Control System(1/2) FPGA IF (FPGA) BOOT PLD Configuration Data for FPGAs Read and Write FPGA Registers for FPGA Setup VIF-32(Front Side) SDI_A SDI_A IF-962(Rear Side) MB-1049 ID1,2 Detect IF-962 Board 39 Control System (2/2) Identification of the Rear mount board CPU on VIF－32 board identifies which Interface option board is installed at the rear,MKE-8020A(exclusive SW’er Interface) or MKE-8012A(SDI Interface) by detecting ID1, 2 of IF-962 board via BOOT PLD. Execute the following control, if MKE-8012A is recognized. FPGA Configuration CPU on VIF-32 configure SDI FPGAs via BOOT_PLD  SDI x 2 FPGA Setup CPU on VIF-32 read/write SDI FPGAs registers via FPGA_IF 40 Power Supply FUSE DC-DC +1.5V DC-DC +3.3V Core PS of StratixＧＸ Transceiver Block PS of StratixGX(SDI_A,for1/2ch) I/O PS of StratixGX, Clock Distribution, CH-LINK +1.5V +3.3V +3.3V-2A +12V LM317 Transceiver Block PS of StratixGX(SDI_A) +1.5V-3A 10A UPC２９ Ｍ３３ +1.5V-2B +3.3V-XT Transceiver Block PS of StratixＧＸ(SDI_A) (On CN-2585) Transceiver Block PS of StratixGX(SDI_B,for3/4ch) +3.3V-2B UPC２９ Ｍ３３ LM317 Transceiver Block PS of StratixGX(SDI_B) +1.5V-3B Transceiver Block PS of StratixＧＸ(SDI_B) +1.5V-2A 41 Timing Signal Clock  LVDS receive from SG on CA board  PLL  input: HD : 37.125 MHz, SD : 27 MHz  internal Clock : HD: 74.25 MHz or 74.175824MHz, SD : 27 MHz Timing Signal  LVDS receive from SG on CA board  Distributed to 2 StratixGX FPGA directly(No Buffer) LVDS RECEIVER LVDS RECEIVER PLL & BUFFER HFCK FD,VD,HD,CKX from CA-54 from CA-54 HD : 37.125MHz SD : 27MHz Clock for FPGAs Timing for FPGAs HD : 74.25MHz,74.175824MHz SD : 27MHz PLL(HD:x2,SD:x1) by TLC2934, NJU7062 & VCXO(27MHz,74.25MHz,74.175824MHz) 42 Indicator and Debug port LEDs, TPs and connector are mounted on the board to indicate system movement. Power Supply LED and TP terminal  LEDs to show that the powers are generated normal.  TP terminals connected with each power supply via of 1k ohm register. EPR  Connector terminal connected with StratixGX FPGA by JTAG chain.  Used only for Debag 43 MVE-8000A Service Training VIF-32 Board/IF-961 Board 44 Agenda  Features  Video Signal Interface  Board Layout  Video Signal Flow  FPGA Function  Control System  Power Supply  Timing Signal  Indicator & Debug port 45 Feature 1. Combiner & Video I/O Board of MVE-8000A  4 Channel Combiner  Graphic Generation and Addition  Back Ground Mix  Recursive Effect, after Combine  Monitor Output 2. HD/SD Video Format 3. IF-961: IF Board for VIF-32 The IF board that makes VIF-32 board as full sized cardboard, which mounted a connector for e-Production, a connector for debag, and an indicator of 7 SEG LED, etc. 46 Video Signal Interface 1. Board to Board Channel-Link(Interface with MKE-8020A,8021A Video, Key In/Out)  Receiver : DS90CR484  Transmitter : DS90CR483 Channel-Link(Interface with MKE-8021A Monitor Output)  Transmitter : DS90CR485 Channel-Link(Interface with DVP-30A)  Receiver : THC63LVDF84  Transmitter : THC63LVDM83 47 Board Layout TBC 1 VMIX DCDC +3.3V DCDC +1.5V DCDC +2.5V FPGA IF BOOT PLD SUB CPU Ch-link Receiv. Ch-link Receiv. ZBT SRAM ZBT SRAM DDR SDRAM DDR SDRAM Ch-link Trans. TBC 4 TBC 3 TBC 2 Ch-link Trans. Ch-link Receiv. Ch-link Trans. Ch-link Receiv. Ch-link Receiv. Ch-link Trans. Ch-link Receiv. Ch-link Receiv. Ch-link Receiv. Ch-link Receiv. Ch-link Receiv. VIF-32 IF-961 VIF-32 Board The VIF-32 board equipped with video input/output processing and video effect functions consists of a control block and a signal processing block. In the control block, the sub CPU (CPU-DR or CPU-DT) receives commands from the main CPU (on the CA-54CFC board) through the Dual Port RAM (IC1101) to control the signal processing block through the FPGA IF (IC603). The sub CPU starts up by booting the flash memory in the module, and then runs the applications upon the second boot of the flash RAM (IC1201) on this board. The boot PLD (IC601) performs configuration of the signal processing block FPGA and the FPGA on the IF-962 board (MKE-8021A), using the address decoding to the peripheral devices of the sub CPU and the configuration flash memory (IC1202) data. Configuration data and applications to be stored in the flash memory are rewritten at every startup when the corresponding data in the compact flash card of the main CPU has been updated. The signal processing block processes 4-channel data of video/key signals in parallel The five FPGAs perform input/output processing (TBC1 to 4) such as switchover from the external clock, recursive effect, 4-channel composite processing, and graphics display (VMIX) such as wire frame. 48 Video Signal Flow VMIX (FPGA) DDR SDRAM ZBT SRAM CL ENC From MKE-8020A Or MKE-8021A to DVP-30A Y C x 4ch K V x 4ch K(2ch)x2 CH Link Signals 300MHz SSTL2 Signals 150MHz 2.5V LVTTL Signals 75MHz 3.3V LVTTL Signals CL ENC CL ENC CL ENC CL ENC CL ENC CL DEC CL DEC CL DEC CL DEC CL DEC CL DEC from DVP-30A V x 4ch K(2ch)x2 CL DEC TBC1 (FPGA) CL ENC To MKE-8020A Or MKE-8021A Y C x 4ch K CL DEC TBC1 (FPGA) CL ENC CL DEC TBC1 (FPGA) CL ENC CL DEC TBC1 (FPGA) CL ENC CL ENC CL ENC To MKE-8021A Y/C (2ch) x2 49 Video Signal Flow VMIX (FPGA) DDR SDRAM ZBT SRAM CL ENC From MKE-8020A Or MKE-8021A to DVP-30A Y C x 4ch K V x 4ch K(2ch)x2 CH Link Signals 300MHz SSTL2 Signals 150MHz 2.5V LVTTL Signals 75MHz 3.3V LVTTL Signals CL ENC CL ENC CL ENC CL ENC CL ENC CL DEC CL DEC CL DEC CL DEC CL DEC CL DEC from DVP-30A V x 4ch K(2ch)x2 CL DEC TBC1 (FPGA) CL ENC To MKE-8020A Or MKE-8021A Y C x 4ch K CL DEC TBC1 (FPGA) CL ENC CL DEC TBC1 (FPGA) CL ENC CL DEC TBC1 (FPGA) CL ENC CL ENC CL ENC To MKE-8021A Y/C (2ch) x2 The signal flows are as follows: Video/key input signals are transmitted using the LVDS (Low-Voltage Differential Signaling) technology through the CN-2153 board (MKE-8020A) or CN-2585 board (MKE-8021A), are decoded by the LVDS receivers (IC1901, 1902, 2001, 2002), and are then input to a TBC corresponding to each channel. After the clock switchover processing, the signals are output from the LVDS transmitters (IC2201 to 2203, IC2301 to 2303) to the DVP-30A board corresponding to each channel. Signals from the DVP-30A board are received by the LVDS receivers (IC2401 to 2403, IC2501 to 2503), and are then transferred to the VMIX where 4-channel composite processing and recursive effect processing using the SDRAM (IC3201, 3202) are added. A wire frame written in the ZBT SRAM (IC3102, 3104) by the sub CPU is added to the video signal as graphics. Each channel data is processed for output to the CN-2153 board (MKE-8020A) or CN-2585 board (MKE-8021A), and is then output from the LVDS transmitters (IC2901, 2902, 3001, 3002) through the TBC. The VIF-32 board generates power voltages 3.3 V, 2.5 V, and 1.5 V from the 12 V supplied by the MB-1049 board. The 3.3 V is mainly used for signal input/output processing, the 2.5 V for the DDR-SDRAM and monitor output, and the 1.5 V for the FPGA’s internal logic. 49 FPGA Function 1. TBC Main Line Video/Key each 4 Channel Input Program Output (Video/Key each 4 Channel) Exclusive MVS I/F Encode・Decode Input TBC 2. ＶＭＩＸ 4 Channel Combiner Recursive Effect, after Combine Graphic Generation and Addition Back Ground Mix 50 Control System(1/2) DP RAM SUB CPU FPGA IF (FPGA) BOOT PLD from CA-54 Addr Data CTLs BUF FLASH BUF & DRV BUF & DRV SWs, LEDs SWs, LEDs BUF Configuration Data for FPGAs Read and Write FPGA Registers for Effect Control COM A Reset USB A EEPROM FLASH FLASH FLASH Boot Boot FPGA Config. Spare 51 Control System(2/2) Single CPU Structure Communicate with Main CPU(CA-54) via DPRAM Boot PLD decode local address  Flash, 7SEG, FPGA_IF and so on Flash Memory x 4 For Boot & Application Software: x2 For FPGA Configuration Data : x2 FPGA Configuration CPU configure 5 FPGAs via BOOT_PLD(with MKE-8020A)  TBC x 4, MIX CPU configure 7 FPGAs via BOOT_PLD(with MKE-8021A)  TBC x 4, MIX, SDI x 2(MKE-8021A) BOOT_PLD: nonvolatile Effects Control Read/Write FPGA(Also FPGA on MKE-8021A) registers via FPGA_IF Control data is synchronized with SUB CPU Clock 52 Power Supply FUSE DC-DC +1.5V DC-DC +2.5V DC-DC +3.3V Core PS of Stratix (VMIX) DDR SDRAM(VMIX), I/O PS of Stratix(VMIX) Clock Distribution, CH-LINK, SUB CPU Control, I/O PS of Stratix(PVM,FILTER,MIX,INTP,ADRS) +1.5V +3.3V +2.5V +12V LP2995 DDR VREF and VTT for VMIX +1.25VR-P, VT-P 10A UPC2918 VCC for Boot PLD +1.8V Core PS of VirtexE (TBC) 53 Timing Signal Clock  LVDS receive from SG on CA board  x2 PLL  input: HD : 37.125 MHz, SD : 27 MHz  internal Clock : HD: 74.25 MHz, SD : 54 MHz Timing Signal  LVDS receive from SG on CA board  Distributed to each FPGA after being synchronized with the internal clock LVDS RECEIVER LVDS RECEIVER BUFFER PLL & BUFFER HFCK FD,VD,HD,CKX from CA-54 from CA-54 HD : 37.125MHz SD : 27MHz Clock for FPGAs Timing for FPGAs HD : 74.25MHz SD : 54MHz x 2 frequency by CY7B9930V 54 Indicator and Debug port(1/3) LEDs, switches and several type of connectors are mounted on the board edge to indicate and monitor system movement. Power Supply LED and TP terminal  LEDs to show that the powers are generated normal.  TP terminals connected with each power supply via of 10k ohm register. USB  An USB terminal port for development. COM A  RS232C terminal of SUB CPU.  Refer to the following terminal settings.  Baud Rate = 57600  Data = 8bit  Parity = none  Stop = 1bit For more details, please refer to the description on the software. CPU CONFIG  CPU monitor mode switch for development. EPR  Connector terminal connected with PLD and FPGA by JTAG chain.  For the test at manufacturing  For the programming of BOOT_PLD (nonvolatile PLD) 55 Indicator and Debug port(2/3) SYSTEM It is a LED which shows that starting of VIF-32 board was completed. While LED has gone out, an FPGA block is in a reset state. DLKD It is a LED which shows that DLL of VirexII and Spartan2E works correctly. When the clock system is something wrong, this LED lights off and the error message is outputted to COM terminal. Then DLL is reset. RCB DONE It is a LED which shows that the configuration of FPGA has been completed. The information on each configuration is outputted to the COM terminal as a log when starting the system. BOOT DONE It is a LED which shows that BOOT_PLD has been booted up completely. When BOOT_PLD is un-programmed, it lights off. When starting up system, basically the above four LEDs are switched on in order of BOOT PLD -> RCB DONE -> DLKD -> SYSTEM 56 Indicator and Debug port(3/3) DBG0-3 A  TP terminals for debugging. DBG4-7 A  LEDs for debugging. SETUP A  DIP SW for debugging. STATUS A  7 SEG LED which show the status of SUB CPU. For more details on indication, refer to the description on the software. 57 Questions? 58","libVersion":"0.3.1","langs":""}