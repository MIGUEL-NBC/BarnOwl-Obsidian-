{"path":"PDF Library/30 Rock Production Engineering - Product Manuals/Calrec/General/Customer Data Backup Utility User Guide.pdf","text":"RESTRICTED CUSTOMER DATA BACKUP UTILITY – USER GUIDE Customer Data Backup Utility – User Guide Page 1 INTRODUCTION The Customer Data Backup Utility provides the following functions: • Taking MCS backups • Restoring from MCS backups • Promoting and demoting routers • Viewing the router status • Updating the trunk link configuration CONNECTING TO A CONSOLE OR ROUTER CORE The utility is located in C:\\Calrec\\Utils\\CustomerDataBackup.jar. Load the utility and the Connection Screen will be present as follows: With software versions 1.10, 1.11, 1.12: From software version 1.12.1 onwards: The ‘About’ button provides brief instructions on use, a copyright notice and the utility software version. The Rack ID (Core ID) is the first two octets of the Core’s IP address as defined in: home/MasterControl/guardian/Console.Config. With software versions 1.10, 1.11, 1.12: Enter the Rack ID and press ‘Connect’. Various IP validity checks will take place in the background. From software version 1.12.1 and onwards, see overleaf: RESTRICTED CUSTOMER DATA BACKUP UTILITY – USER GUIDE Customer Data Backup Utility – User Guide Page 2 Connecting from a Calrec console PC When operating this utility directly from an Apollo or Artemis console PC, there is a valid connection to both primary and secondary MCS modules via the POE and Surface Switch connections: • In this instance, the \"Primary & Secondary\" connection option should be selected. Connecting from an external control PC When operating this utility from an external control PC (as in the case of a Router Core / CTA rack), the chosen connection option will depend on the physical wired connection(s) between the PC and the core: • If the control PC is connected to the Mac 7 port on either the primary or secondary MCS (the physical connection must always be to the current active MCS); The \"Primary & Secondary\" connection option should be selected. • If the control PC is connected to one of the Mac 3, Mac 4 or Mac 5 ports on either the primary or secondary MCS (active or inactive status is irrelevant as long as the MCS connected to is MOK); The \"Primary only\" or \"Secondary only\" connection option should be selected dependant on which module is physically connected. N.B. With a physical connection to only one MCS, it is not possible to communicate with both modules. In this instance, if the \"Primary & Secondary\" connection option is selected, the ‘local’ module (ie: the one with the physical connection) will subsequently be referred to as ‘Active’ regardless of the true active/inactive status. • If the control PC has a valid connection to one of the Mac 3, Mac 4 or Mac 5 on each MCS, for example via a switch (active or inactive status is irrelevant as long as both MCS’ are MOK); The \"Primary & Secondary\" connection option should again be selected. In the case of a Dual Router Core (Split Rack CTA) When operating this utility in the situation of a Dual Router Core, the chosen connection option will again depend on the physical wired connection(s) between the external control PC and one or more cores: • If the control PC is connected to one of the Mac 3, Mac 4 or Mac 5 ports on either the primary or secondary MCS (active or inactive status is irrelevant as long as the MCS connected to is MOK); The \"Primary only\" or \"Secondary only\" connection option should be selected dependant on which module is physically connected. • If the control PC has a valid connection to one of the Mac 3, Mac 4 or Mac 5 on each MCS, for example via a switch (active or inactive status is irrelevant as long as both MCS’ are MOK); The \"Primary & Secondary\" connection option can be selected. • It is not possible to connect to a Dual Router Core via the Mac 7 port, as this is required for inter-rack communications. RESTRICTED CUSTOMER DATA BACKUP UTILITY – USER GUIDE Customer Data Backup Utility – User Guide Page 3 OPERATION Once a connection to the active MCS is achieved, the current MCS software version (master control app) and pack type are retrieved and displayed. N.B. Router Cores will always display ‘Apollo’, even though no surface is attached. When the ‘Detailed information output’ checkbox is enabled, the utility outputs verbose progress and additional diagnostics information during operations. ‘Disconnect’ closes the connection with the active MCS and returns to the connection screen. ‘Exit’ exits the application (after safely closing the MCS connection). Making Backups The ‘Backup Active MCS’ and ‘Backup Inactive MCS’ checkboxes allow you to specify which (or both) MCS cards you wish to backup data from (the default is to backup from just the active MCS as data ‘should’ be consistent between cards). Clicking the ‘Backup’ button will open a dialogue window allowing you to select a destination directory into which the MCS files will be archived. It is not possible to supply a file name for the archive as by default the file name will instead contain both an MCS ID stamp and a timestamp, allowing the backup to be easily identified. Click the ‘Open’ button to confirm the target destination and the backup process will begin. It is not necessary to restart either MCS once the backup procedure is complete. Restoring Backups The ‘Restore Active MCS’ and ‘Restore Inactive MCS’ checkboxes allow you to specify which (or both) MCS cards you wish to restore your archived data to (the default is to restore to both MCS cards as normally you would want data to be consistent across both cards). Clicking the ‘Restore’ button will open another dialogue window allowing you to select your intended archived file. Click the ‘Open’ button to begin the restore process. The utility will automatically restart any affected MCS cards once the restore procedure is complete. RESTRICTED CUSTOMER DATA BACKUP UTILITY – USER GUIDE Customer Data Backup Utility – User Guide Page 4 Validation Before the restore procedure can commence, the incoming data is validated based on its attached “BackupData.txt” file: • If the ‘Pack Type’ does not match, the restore cannot continue as the archived backup file came from the wrong type of console. • If the ‘Software Version’ does not match, the utility will provide a warning and ask the user to confirm the restore. As long as the major software version is consistent (ie: 1.12 vs 1.12e), there should not be any problems and you may proceed with caution. However, it is not recommended to continue if the major software version is different. In this instance, there is a strong chance that there will have been a change in database structure between software versions, which may require a subsequent re-running of upgrade scripts in order to resolve. Only Restore Hydra2 Database If ‘Only restore Hydra2 database’ is checked and restore mode is activated, then only the Hydra2DB.nbk file will be restored on the target machine – no other files are affected. It is often useful for all consoles on a network to be periodically updated with a copy of the Hydra2 database from the Master Router; for example to allow a console to becomes a standalone, without losing reference to I/O box and port names; or in order to promote another console in the case of a major failure to the Master Router. Router Functions Promote Router: Click to promote the connected routers to master routers (ie: automatically adds the MasterRouter1 file to the /home/montana/Router/Geode/H2Router folder on the connected routers). Demote Router: Click to demote the connected routers to slave routers (ie: automatically removes the MasterRouter1 file from the /home/montana/Router/Geode/H2Router folder on the connected routers). Router Status: Click to retrieve the current master/slave status of each connected router. A dialogue will appear listing the connected routers with the status Master, Slave, or Not Present. N.B. It may take up to six seconds for a timeout if neither slot is occupied. Update Trunk List: Only required if Trunk Links are installed on your networked system. Click to open a file selection dialog that allows you to upload a new trunk.xml file into the primary and secondary (if present) router (to the /home/Montana folder). N.B. This file must be called “trunk.xml”. This action will not automatically reboot the routers when finished, so the new trunk file will not be active until the next boot. N.B. When using Trunk Links, every router on the network must hold a copy of the same trunk.xml file. This trunk file can be uploaded to other routers in the same way from the Customer Data Backup Utility running on their local console PC; or can be propagated from the Master Router to all Slave Routers by using the ‘sti’ command from within a Putty telnet session. RESTRICTED CUSTOMER DATA BACKUP UTILITY – USER GUIDE Customer Data Backup Utility – User Guide Page 5 Progress Display Once an operational mode has been selected, the following screen will be displayed (albeit with a header that represents the operation being performed): Information regarding the details of this operation will be added to the text pane in real time, with the level of detail determined by the before mentioned ‘Detailed information output’ selection. At any time (within reason), the operation can be cancelled, by pressing the ‘Cancel’ button. All operations will roll back any changes that have been made on the MCS(s). The restore mode cannot be cancelled once the operation has proceeded past the point where the files that are to be replaced are deleted. Otherwise the desk could be left in an unstable state. Once the operation has finished (or any roll back activities caused by a ‘Cancel’ have completed), the ‘Cancel’ button will change into a ‘Finish’ button. Pressing this will disconnect from the MCS and return you to the ‘Connect’ page. RESTRICTED CUSTOMER DATA BACKUP UTILITY – USER GUIDE Customer Data Backup Utility – User Guide Page 6 BACKUP CONTENTS The following is a list of files and folders copied during the backup process. They are archived to a zip file that retains the file structure (including empty folders): N.B. Where no specific files have been listed within a folder, the utility will copy all files contained in that folder. /etc rc.local * /home /MasterControl /guardian Console.Config * /MasterControl Application.xml * StudioSetup /Options 48KhzGeberalOptions.gno 48KhzGeberalOptions.opt ActivePortAliasList.pao SurfaceLayout.slo SyncSettings.syn /DefaultSettings /ExtIFace /HydraNetwork /InsertSetup /MidiSetup /MonMtrExtIP /MonSelSetups /PathConfigs /Plugins /PortAlias /SurfaceLayout /TFTSetups /UserSectionSetups /WildSetups /Shows /Default_Shows /Non_Default_Shows /UpgradeScripts LastUpgradeVersion /opt /firebird Awacs.nbk DeskShows.nbk Hydra2DB.nbk BackupData.txt * trunk.xml (if present on either router) N.B. During a restore, the files denoted with a * will not be overwritten on the target MCS. These files in the backup are used only for reference and the validation of the legitimacy of the restore. N.B. During a restore any empty ‘Options’ folders that are not currently present on the MCS will be re-created.","libVersion":"0.3.1","langs":""}