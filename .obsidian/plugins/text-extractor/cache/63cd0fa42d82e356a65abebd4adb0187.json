{"path":"PDF Library/30 Rock Production Engineering - Product Manuals/VSM/QuickStart vSNMP_New.pdf","text":"vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 1 vSnmp QuickStart Guide Authors: pbo@l-s-b.de mke@l-s-b.de Date: 2012-01-13 Product Version: 1.0.0 Beta 1 vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 2 Contents 1) Installation .......................................................................................................................................... 3 2) Connecting to a Device........................................................................................................................ 4 2.1) Creating a Device ......................................................................................................................... 4 2.2) Discovered Devices ...................................................................................................................... 6 3) MIB Files ............................................................................................................................................. 7 3.1) MIB Browsing ............................................................................................................................... 7 3.2) MIB Querying ............................................................................................................................... 8 3.2) MIB File Upload ............................................................................................................................ 9 4) Device Classes ................................................................................................................................... 11 4.1) Introduction ............................................................................................................................... 11 4.2) SNMP Tables .............................................................................................................................. 13 4.3) SNMP Walk ................................................................................................................................ 15 4.4) Polling ........................................................................................................................................ 16 4.5) SNMP Traps................................................................................................................................ 16 4.6) Formulas .................................................................................................................................... 17 4.7) Value Aliases .............................................................................................................................. 19 4.8) Resource Access Control ............................................................................................................ 20 4.9) Import and Export ...................................................................................................................... 21 5) Hooking up with vsmStudio............................................................................................................... 23 5.1) Connecting to vSnmp ................................................................................................................. 23 5.2) Unique Names ........................................................................................................................... 24 5.3) Dynamic Columns....................................................................................................................... 24 6) Technical Notes ................................................................................................................................. 25 vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 3 1) Installation  vSnmp Beta 1 is distributed in two separate packages: one for 32bit Windows (x86) and one for 64bit Windows (x64). Please download the package that fits your system.  vSnmp versions later than Beta 1 are distributed in one single package, including both x86 and x64 bit installers (Setup_x86 and Setup_x64 exe/msi files).  Unzip the downloaded ZIP file and run setup.exe. NOTE: vSnmp requires .NET Framework 4.0 (Client Profile) and F# Runtime 2.0. The setup will try to download these prerequisites from the internet. You can also download these packages and install them manually: .NET Framework 4.0 http://www.microsoft.com/download/en/details.aspx?id=24872 F# Runtime 2.0 http://www.microsoft.com/download/en/details.aspx?id=15834  Follow the installation instructions  Open Control Panel/Administrative Tools/Services and start the service vSnmp.Manager. vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 4 2) Connecting to a Device 2.1) Creating a Device  Open Start Menu/VirtualStudioManager/vSnmp/vSnmp Editor  In the upcoming Connect dialog, enter localhost and click Connect. The vSnmp Editor will now connect to the vSnmp Manager service running on the local system. vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 5  Press the button next to Device Classes to open the device dialog.  As class name, enter the model name of the device you want to manage (e.g. “HP LaserJet 1522”). As the device name, choose a name that identifies the concrete unit you are dealing with (e.g. the unit’s location or serial number). Under Address enter the IP address or host name of the device. Now press OK.  Now you have created an empty device. Select it and switch to the MIB Tree tab on the left side of the screen. vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 6  In the tree, navigate to iso.org.dod.internet.mgmt.mib-2.system and drag the node system to the device view on the right:  If the device is online, you can now see some basic information about the device.  Now save the device class to the vSnmp Manager by clicking Check In in the top right corner of the screen. 2.2) Discovered Devices  vSnmp will periodically scan the network for SNMP-enabled devices. These devices are listed under Discovered Devices in the Devices Tab.  You can manage a discovered device by right-clicking the discovered device and selecting Create Device Class to create a new device class describing the model of the discovered device or by clicking Add to Device Class in the same context menu.  Devices discovery in vSnmp uses UDP broadcast messages. Therefore, you will not find any devices if your network hardware is configured to disallow broadcast messages. vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 7 3) MIB Files 3.1) MIB Browsing  vSnmp contains a standard MIB library of about 300 MIB modules. Most MIB modules that are publicly available as RFCs are included.  This standard library makes it possible to get a lot of network-related information out of any SNMP device (like number of NICs, IP addresses, routing tables etc.) You can browse the MIB library in the MIB Tree tab. Most standard network management objects can be found under iso.org.dod.internet.mgmt.mib-2.  To navigate to a specific object, you can use the address bar found above the MIB tree:  Example: to navigate to the columnar object ifDescr defined in IF-MIB, you can either type the object’s OID (1.3.6.1.2.1.2.2.1.2) or IF-MIB::ifDescr into the address bar, then press enter.  Under MIB View on the right pane you can examine information about the selected MIB object: vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 8 3.2) MIB Querying  Using the address bar, you can also issue queries against the MIB database. The simplest query would be to just enter the name of the object you want to find. This will bring up the query results tab:  Note that vSnmp will run the query against all child objects of the currently selected object. So if you want to query the entire MIB database, either switch to the MIB Query tab to enter your query or select the “iso” node in the MIB Tree tab before entering the query.  You can also issue queries that are much more complex. The syntax of the query language is based on the syntax used by Windows 7 Explorer’s search feature (e.g. name:*.png size:large).  Likewise, you can query properties of objects in vSnmp: The query string name=if* basetype=integer would yield all objects whose names start with “if” and whose syntax can be resolved to INTEGER. The query string (type=agent-capabilities or type=module-compliance) module:cisco would yield all AGENT-CAPABILITIES and MODULE-COMPLIANCE nodes that are defined in a module whose name contains the string “cisco”.  An application note covering the full syntax of the query language is pending. vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 9 3.2) MIB File Upload  To access custom functionality offered by a device, you need to upload some device-specific MIB files published by the device’s manufacturer.  To do so, switch to the MIB Modules tab on the left pane:  Click the button to upload MIB files. This will bring up the upload dialog:  Click the Browse button and navigate to the folder where your MIB files are stored. Then select all the MIB files you want to upload.  Alternatively, you can drag MIB files from Windows Explorer and drop them on the upload dialog.  As soon as all uploads are marked “Complete”, click the Update MIB Database Now button to re- compile the MIB database. The compilation process will take some time and when it has finished, the vSnmp.Editor will need to re-initialize. Therefore, you will be asked to save any unsaved device classes before the MIB database is rebuilt. vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 10  After the compilation process has finished, keep an eye on the notification area in the top left corner of the vSnmp.Editor main window. If it displays a red border, the MIB compiler has encountered errors in the MIB files you have uploaded:  Open the notification area’s drop down window and examine the reported errors. If a “missing module” is reported, you also need to upload the MIB files reported missing.  Even when encountering errors in a MIB file, vSnmp will load as many objects from the file as possible. The objects which failed to load are reported in the notification area. vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 11 4) Device Classes 4.1) Introduction  Configuring device classes is central to working with vSnmp. A device class models a particular type of device, e.g. a “HP LaserJet 1522” printer. To address the LaserJets in your network, you need to add a device of the “HP LaserJet 1522” device class for each LaserJet on the network.  A device can be described and contained by multiple device classes. For example, you can create a generic device class that only contains standard network-management objects from IF-MIB and IP-MIB, adding all devices on your network to this device class. Then you can create dedicated device classes modeling the actual types of devices present on your network.  In vSnmp, a device class contains a set of object entries which are displayed in a tree view when selecting a device class:  The green bars are state indicators: The bar is green when the object entry has been saved to vSnmp.Manager and yellow when it is new or modified. Saving the device class to vSnmp.Manager (by clicking “Check In” or “Save but keep checked out”) will turn the bar green.  Object entries usually contain one or more object cells, which represent actual MIB objects (either single values or conceptual columns).  You can create object entries by dragging the following kind of MIB nodes to the device class: o OBJECT-TYPE (non-columnar): Creates an object entry with a single cell. o OBJECT-TYPE (columnar): Creates an object entry with a single cell which identifies a conceptual column. o OBJECT-TYPE (tabular): Creates an object entry with cells identifying all column objects in the conceptual table. vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 12 o OBJECT-GROUP: Creates an object entry with cells identifying all objects contained in the group. o NOTIFICATION-TYPE and TRAP-TYPE: Creates an object entry with cells identifying all objects that are listed under the node’s OBJECTS or VARIABLES clause. NOTE: Creating an object entry from a trap object does not imply any trap handling logic. o AGENT-CAPABILITIES: Creates an object entry for each of the OBJECT-GROUPs listed under the INCLUDES clause, taking into account the VARIATION clauses defined for the included objects. o OBJECT-IDENTIFIER, MODULE-IDENTITY and OBJECT-IDENTITY: Creates an entry containing cells identifying all objects directly below the source node.  In the Devices tab on the left side of the vSnmp.Editor window, you can either select a device class or a device to edit the entries of the device class.  If a device is selected, expanding an object entry node in the tree view will GET the values of the cells contained in the entry. If the device responds to the GET request, the values will be displayed next to the object cells.  If a device does not respond to a GET request, you see a notification saying that ‘device xyz reported state XXX’. This either means that the device has gone offline, or it just does not support the requested objects. vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 13 4.2) SNMP Tables  Conceptual tables in SNMP consist of a set of “columnar” objects, which yield multiple values when requested. A single value can be requested by appending one or more indices to the object’s object identifier (OID).  Most of the significant data exchanged via SNMP is organized in tables, so working with tables is a central aspect of vSnmp.  To get started with tables, select a device in the Devices tab. Add the node IF-MIB::ifTable to the device class. This is the standard SNMP table that lists all interfaces (like NICs, serial ports etc.); any device should support this object.  Right-click the object ifDescr and select Get Value, which should bring up a dialog displaying all values of this conceptual column: In this example, two IP interfaces are present: the loopback adapter and one NIC.  Now click the “Select All” check box and then click “Create New Entry”, which adds a new object entry to the device class containing two object cells: Both cells refer to the same MIB object (IF-MIB::ifDescr), but have different indices (1 and 2).  You can change the index of an object cell by selecting the cell and clicking on the index link: Note that object cells in the device class need to be unique – e.g., you cannot add IF- MIB::ifDescr@1 twice. vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 14  If the device is currently offline, you can manually configure indexed objects. To do so, right-click the columnar cell ifType in the ifTable object entry and click the Clone with new Index… menu item. In the upcoming dialog, enter “1..2” as the index value. This will create cells for the indices 1 through 2. If your device has more interfaces, you can also type in a greater range. Now click the Create New Entry button to add another columnar object entry called ifType to the device class.  Indices in SNMP can consist of many parts and managing them can be quite complex. Though the two ways of creating indexed object cells in vSnmp work for any index complexity:  Up to now, you have arranged tabular data by column. You can also arrange tabular data by row. To do this, right-click the tabular object entry ifTable and click Clone with new Index…. Enter the index as described above and you will have a new row entry:  Arranging tabular data in row entries can give you a good overview over a specific device feature, but arranging data in columns is much more common for the following reasons: o Columnar object entries can define formulas common to all contained cells. o You can specify value aliases for all cells contained in a columnar object entry. vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 15 4.3) SNMP Walk  “Walking” an SNMP device means requesting all values under a specific OID from the device. This can be very useful to determine which parts of the MIB tree are present on the device.  To walk a device with vSnmp, select the device in the device tree and drag the MIB node from where you want to start the walk onto the device – you will see the following message below the object entry tree:  Drop the MIB node on the message to walk the device; this process can take some time. As soon as the walk has finished and if it yielded results, the following dialog will appear: This for example is the result of walking the OID TCP-MIB::tcp (1.3.6.1.2.1.6).  You can now mark the objects you want to create object entries from and click “OK”. For each object decorated with the symbol , an object entry with a single cell will be created. For each vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 16 object decorated with the symbol , a column entry will be created, containing cells for all marked sub-objects. 4.4) Polling  If the value of an object may change spontaneously, you can configure vSnmp to poll the object entry containing the object. To do so, right-click the object entry you want to have polled and click “Poll”. In the details pane below the object entry tree, you can specify the poll interval:  Polled object entries are marked with the symbol in the object tree.  Note that polling a lot of objects on a device may significantly decrease the device’s performance and use up a lot of network bandwidth. 4.5) SNMP Traps  An SNMP Trap is a message spontaneously sent from the SNMP agent to signal a state change. Usually, traps include the following information: o An implicit semantic meaning of the trap (e.g. IF-MIB::linkDown means “interface link offline”) o A set of SNMP objects that have changed value and the new values of these objects.  vSnmp supports traps without further configuration, but only in a limited way: o If a trap is received, the SNMP objects and their new values included in the trap message will be handled just like a response to a GET request. o vSnmp does not yet take the semantic meaning of the trap into account. o For example, when the IF-MIB::linkDown trap is received and if it includes the information “interface 1 has ifOperStatus ‘down’”, the object cell ifOperStatus@1 will receive the value ‘down’. If the trap only includes the information “interface 1” and the new ifOperStatus has to be inferred from the semantic meaning of the trap, the object cell ifOperStatus@1 will not change value. o This is subject to change for later versions of vSnmp. vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 17 4.6) Formulas  Formulas provide a way to project values received from an agent to another value range or representation.  For example, an agent might send gain values as INTEGERs ranging from 0 to 65535, while the actual gain range in is -64db to 12db. Obviously, the user of a vSnmp front-end application (e.g. vsmStudio) prefers to deal with the gain values in db instead of the technical INTEGER range.  To accommodate for this need, vSnmp provides the concept of formulas.  Formulas can be attached either to single object cells or to columnar object entries. If the formula is attached to an object entry, all cells contained in the entry use the formula. This is only possible for columnar object entries, because all objects in one column share the same syntax.  To get started with formulas, create a columnar object entry for the object IF-MIB::ifSpeed, containing all values the device yields:  Now click on the link Create Formula in the lower details pane:  This will create a basic formula which does not alter the input value – meaning it returns the identity of the input value:  The input value of the formula is denoted with the symbol $. You can use this symbol in an arithmetic expression which yields the desired output range.  The line “$ =“ defines the input value (as sent by the device) of the formula.  The following line “RX($) =“ defines the expression used to convert values that have been received from the device.  The following line “TX($) =” defines the expression used to convert values that are about to get sent to the device. This expression has to reverse the projection made in the RX expression. vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 18  To follow the ifSpeed example, let’s display the speed of the interface in megabytes per second instead of bits per second: o Enter a test input value in the “$ =” field, e.g. “10000000” (10 megabit) o Enter the expression $ / 8000000.0 into the “RX” field. 8000000 is the factor used to turn unit bits into unit megabyte. o To reverse the RX expression, enter the expression $ * 8000000.0 into the “TX” field. o You will now see the following: o You can see that the result of the RX expression is 1.25 (megabytes) and the result of the TX expression, which uses 1.25 as input value, is 10000000 (bits per second, which is equal to the input value of the RX expression).  To assist the user in creating formulas for INTEGER values, the formula wizard can be used. To open the formula wizard, click on the symbol :  Now enter the actual input range and the desired output range and click “OK”. This will automatically create the RX and TX expressions necessary for the projection.  All formulas created for a device class can be viewed and edited in the device tree:  You can see that a formula with the name ifSpeed was inserted under the Formulas node. You can rename and edit the formula from the tree. You can also use this formula for other object entries or cells of the device class, simply by selecting the cell or entry and dragging the formula from the device tree to the details pane of the device view. vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 19 4.7) Value Aliases  A lot of SNMP objects use an enumeration-like syntax, defining names for specific integer literals (e.g. INTEGER { off(1), on(2) }).  Often these values convey too much information for use in front-end applications (e.g. vsmStudio). This is why you can add aliases for enumeration values.  To get started with value aliases, create a columnar object entry for the object IF- MIB::ifOperStatus, containing all values the device yields:  Click the link labeled Create Value Aliases in the details pane:  This will create aliases for each of the possible values the column syntax defines:  Now you can enter a free-form alias for each possible value. This alias will be displayed instead of the original value in front-end applications.  When selecting an object cell contained in the entry which defines value aliases, the aliased value of the cell will be displayed next to the original value: vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 20 4.8) Resource Access Control  Device classes are subject to Resource Access Control, which means they can only be edited by one vSnmp.Editor instance at a time.  The terms used in Resource Access Control are the following: o “Check Out”: make the resource editable by the local vSnmp.Editor instance. This in turn makes the resource read-only for other instances of vSnmp.Editor. o “Check In”: release the write-lock on the resource and upload the modifications made to the resource to vSnmp.Manager. o “Save”: upload the modifications made to the resource to vSnmp.Manager, but keep the resource checked out. o “Undo Checkout”: release the write-lock on the resource and undo all modifications made to the resource since the last check-out.  vSnmp.Editor will automatically check out device classes when: o You drop object nodes on the device view. o You select any modifying operation through the context menu of the device view.  If you want to edit any of the properties in the details pane, you need to check out the device class manually. vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 21 4.9) Import and Export  Device classes can be exported as standalone files. These files have to be signed by L-S-B in order to make them importable. This way, the sanity of the device class configuration can be assured and a database of device classes can be built.  To export a device class, right-click the device class in the device tree and select Export…. This will bring up the following dialog:  Fill in all available information and click “OK”. This brings up the following dialog:  When following the given instructions, you can click the email links on the dialog to open your email program and the “Click here” link to open Windows Explorer. Attach the exported file to the email message addressed to vSnmp.Sign@l-s-b.de and send the email message. vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 22  As soon as you have received the signed package, save the attached file with the extension “.vsnmp” to a location reachable from the computer you want to import the device class to.  In vSnmp.Editor, click the symbol atop the device tree. This will bring up a standard “Open File” dialog which allows you to select a vSnmp package file to import.  If all the MIB modules required by the device class you are about to import are present, vSnmp.Editor will present the “Create Device” dialog.  If not all of the required MIB modules are present, the following dialog will appear:  This dialog lists all MIB modules which are not included in the vSnmp standard MIB library, but are used by the device class you are about to import. vSnmp lists enough information for you to be able to acquire the missing MIB modules.  Even if some MIB modules are missing, you can still import the device class, though this will yield unresolved references to objects which are defined in the missing MIB modules. vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 23 5) Hooking up with vsmStudio 5.1) Connecting to vSnmp In order to be able to control and monitor the devices configured in vSnmp with vsmStudio, the ember interface has been implemented which represents the object entries and cells as gadget nodes and parameters. To establish a connection with the vSnmp service, a new control port is required. To do this, the following steps are required:  Open the “Manage Communication Ports” Dialog  Click “New” to open the Ports Dialog Select “Gadgets”, “VSM”, “Gadget Connector (Ember)” and click “Next”.  Now click “New Port” and the “Create New Tcp/IP Port” Dialog should open. Enter the IP address of the server the vSnmp manager is running on. The Remote Port number must be set to 9001 vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 24  Click “Ok”, then “Finish”.  Now you can open the Gadget tree which should display an Entry like “<IPAddress>:9901 (TCP)” with a green dot, which indicates a valid connection with vSnmp. 5.2) Unique Names  blablabla 5.3) Dynamic Columns  blablabla vSnmp Quick Start Guide L-S-B Broadcast Technologies GmbH Page 25 6) Technical Notes  If the vSnmp Manager stops running, look for a file called similar to “__vSnmp-Dump- 634490912584621218.log” in the vSnmp installation folder. Please send this file to our technical support; this will greatly help us fixing the issue.  In order to synchronize two instances of vSnmp Manager running on different machines, do the following: o Finish configuration on the first machine o Stop the vSnmp Manager service on both machines o Copy the file “storage.dat” found in the vSnmp installation folder to the second machine o Copy the contents of the “Mib” folder found in the vSnmp installation folder to the second machine o Start the vSnmp Manager service on both machines  This only applies to the alpha and beta versions of vSnmp. The feature-complete version will handle synchronization by itself.","libVersion":"0.3.1","langs":""}