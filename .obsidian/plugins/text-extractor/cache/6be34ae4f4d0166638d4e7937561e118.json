{"path":"Referenced Material/Reference Library/Vendor/Evertz/SDVN Training/12 - 7880IPG-NAT Course Updated 051419.pdf","text":"Company Confidential 1 7880IPG-NAT Company Confidential ▪ The 7880IPG-NAT is a high-density, multi-port, multi-flow hardware Network Address Translation (NAT) engine ▪ Enhanced Features: • Port Aggregation • Tunneling • Packet Replication • Bandwidth Capping ▪ These will allow service providers to seamlessly bridge across networks in multi-tenant environments ▪ Multiple processing cores can be configured to aggregate their TX traffic to a single WAN port, and the RX traffic from the WAN port is distributed to its contributing processing cores. 7880IPG-NAT 2Company Confidential ▪ Organized with 6 WAN-side ports and 6 LAN-side ports ▪ There is a packet processing core between each WAN-LAN port pair. ▪ Each processing core can sustain up to 256 data flows. Rear Connections 3Company Confidential ▪ There are 4 Modes of Operation • One-to-One or IP-NAT – optional packet replication • Tunneling – MC In MC NAT mode for tunneling flows based on multicast addresses • VLAN Mode – VLAN based NAT for flows based on VLAN tagged datagrams • Port Mode – Port based NAT for encapsulating all traffic on a physical port Modes of Operation 4Company Confidential ▪ 4 modes of operation ▪ WAN-side Port Aggregation and Demux in all modes. ▪ Point-to-point and multi-point signal distribution/contribution inside the facility ▪ Operates over a IP/MPLS/VPLS core network ▪ In-band Management (Management Traffic transport over Multicast) ▪ Full integration with VistaLINK PRO and Magnum ▪ Flexible SFP Ethernet I/O for 12x1GE or 12x10GE Features and Benefits 5Company Confidential ▪ The 7880IPG-NAT will be configured with an IP address through the serial port on the board. ▪ After configuring the network settings in the serial menu, reboot the module. ▪ Connect the Control Port of the module to the control network and ensure the module is able to be pinged using the control IP address. ▪ NOTE: Frame Controller is not required for communication to the 7880NAT Initial Setup – Without Frame Controller 6Company Confidential ▪ The 7880IPG-NAT can be accessed directly through the 7800FC ▪ Login to the 7800FC using the IP set for the module then select the 7880IPG-NAT module from the list of modules in the frame ▪ Configure as normal setting up the Control port to operate on the network. Initial Setup – With Frame Controller 7Company Confidential ▪ Also called IP-NAT Mode ▪ Allows multicast IP streams from one network to be translated to different unicast/multicast IP addresses, on a flow-by-flow basis, up to 256 unique flows per processing core. ▪ Address translation is available in both direction ▪ Additionally, optional Packet Replication feature is provided in the WAN-to-LAN direction. Operation Modes – One-to-One 8Company Confidential ▪ Also call Encapsulation or MC-in-MC IP NAT Mode ▪ Allows multicast addresses from the LAN side to be encapsulated into new multicasts for the WAN network, on a flow by flow basis, up to 256 unique flows per processing core ▪ Traffic is de-encapsulated in the WAN-to-LAN direction. Operations Mode – Tunneling 9Company Confidential ▪ VLAN-tagged datagrams from the LAN side to enter a WAN after multicast encapsulation, similar to the tunneling NAT mode. ▪ In this mode, flows are based on VLAN tags, rather than unicast/multicasts alone ▪ Up to 256 unique flows can be configured per processing core, with independent encapsulation headers Operation Mode – VLAN Mode 10Company Confidential ▪ Allows the user to encapsulate all incoming LAN traffic on a given physical port, on a port-by-port basis. ▪ There is no multicast VLAN Tag filtering ▪ All traffic on that physical LAN port is encapsulated out to the WAN, and de-encapsulated in the reverse direction ▪ Provides Bandwidth Capping feature such that network operators can ensure that links do not over- subscribe their contribution limits to a WAN. Operation Mode – Port Mode 11Company Confidential NAT Core Diagram 12Company Confidential WAN-Side Port Aggregation and Demux 13 ▪ Port aggregation works such that WANs can be configured to multiple LAN ▪ This is available in all modes ▪ NOTE: One LAN cannot be configured to multiple WANs Company Confidential ▪ SFP Modules • 12 x 10GbE optical • 12 x 1GbE optical or RJ45 ▪ IP NAT and MC in MC NAT modes • 1536 x Static IP flows capacity per direction ▪ VLAN Based NAT • 1536 x VLAN ID flows capacity per direction ▪ Port Based NAT • 6 x Physical flows capacity Technical Specifications 14Company Confidential ▪ This page allows the user to perform basic monitoring of the module • Each of the 6 Processing Cores can have unique modes of operation • Port monitoring for each pair of WAN-LAN ports ▪ NOTE: The NAT cores will only operate in the selected NAT Mode Web Interface - System 15Company Confidential ▪ This page allows for basic configuration of the Data ports • IP address for WAN-LAN port pairs ▪ Each Data Port has 15 virtual ports, called Interfaces, available to be configured • These can each be set to unique VLAN’s • When a flow is configured to that Interface it will then be tagged with that VLAN Web Interface – Data Port Configurations 16Company Confidential ▪ Ensure that the LAN port has been configured on the same subnet as the network its connected to. ▪ Ensure that the WAN port has been configured on the same subnet as the network its connected to. ▪ All ports have 15 virtual interfaces that can be configured uniquely with their own MAC address, IP address and VLAN Web Interface – Data Port Configurations 17Company Confidential ▪ This page is used when in IP NAT and MC-in-MC NAT modes ▪ Input Destination IP Address/UDP Port and VLAN (if applicable) is the source from the LAN connection the NAT will subscribe too ▪ Each core will be configured independently for each of the 256 sources into the NAT • The enable feature sets up the flows for each core, using the Input destination IP to organize them ▪ Ensure that the mode is set to Enable for all the flows that will be used Web Interface – Flow Table (LAN to WAN) 18Company Confidential 19 ▪ This page is used when in IP NAT and MC-in-MC NAT modes ▪ Input Destination IP Address/UDP Port and VLAN (if applicable) is the source from the WAN connection the NAT will subscribe too ▪ Each core will be configured independently for each of the 256 sources ▪ The flows will be setup here by routes made in Magnum ▪ This page is also part of the set up of the Packet Replication process Web Interface – Flow Table (WAN to LAN) Company Confidential ▪ Packet Replication is currently only supported in IP NAT mode for WAN to LAN configurations. ▪ In the Flow Table WAN to LAN configuration set the following: • Set the flow mode to De-Encap/NAT • Configure the Destination multicast to be the same for the flows being grouped ▪ In IP NAT Control WAN to LAN set the following: • Set the flow mode to Modify • Configure the desired Source IP address and the Destination multicast address • Setting the LAN Interface will use the VLAN configured on the Data Port Configuration page to add a VLAN tag into the translation Configuring Packet Replication 20Company Confidential ▪ This diagram explains the processing that is available for the WAN to LAN configurations as well as the LAN to WAN configurations in IP NAT mode. ▪ From WAN to LAN Packet Replication can be performed as well as Address Translation ▪ From LAN to WAN only Address Translation can be performed IP-NAT Mode Block Diagram 21Company Confidential ▪ Allows LAN to WAN configuration of the Network Address Translation for each flow set to Modify ▪ Also allows for the binding of the Flow to a WAN interface ▪ The corresponding LAN to WAN input will be translated to the information provided in this section ▪ i.e. LAN to WAN flow 1 on the input configuration will be the content in flow 1 on this page ▪ Setting the Output Mode to pass-through will allow the flow to be transmitted without an address translation Web Interface – IP NAT Control 22Company Confidential 23 ▪ Allows WAN to LAN configuration of the Network Address for each flow set to Modify ▪ Also allows for the binding of the Flow to a LAN interface ▪ The corresponding WAN to LAN input will be translated to the information provided in this section ▪ i.e. WAN to LAN flow 1 on the input configuration will be the content in flow 1 on this page ▪ The Destination IP Address (multicasts address) will be pushed for each flow from Magnum-SDVN Web Interface – IP NAT Control cont. Company Confidential ▪ On the Flow Table set the flow(s) to enable for the core on the LAN to WAN side • Then set the Destination IP Address of the stream that will be received from the LAN. ▪ On the IP NAT Control set the following: • Set the Output Mode to Modify to perform the address translation • Set the Source IP Address the flow is coming from (if applicable) • Set the Destination IP address to be the multicast address that the stream will output to the WAN with Configuring IP NAT LAN to WAN 24Company Confidential ▪ On the Flow Table set the flow(s) to enable for the core on the WAN to LAN side • Then set the Destination IP Address of the stream that will be received from the WAN. ▪ On the IP NAT Control set the following: • Set the Output Mode to Modify to perform the address translation • Set the Source IP Address the flow is coming from (if applicable) • Set the Destination IP address to be the multicast address that the stream will output to the LAN with Configuring IP NAT WAN to LAN 25Company Confidential ▪ Under Data Port Configurations, for the interfaces on the associated Data Port configure the desired VLAN (this will be the VLAN that is used for the translation) ▪ On the Flow Table set the VLAN of the Input Flow ▪ On the IP NAT Control page set the appropriate WAN/LAN interface for the output. • This will be the interface that the VLAN was set on under Data Port Configurations ▪ NOTE: If the input is not configured with a VLAN, then a VLAN cannot be set on the output VLAN Translation 26Company Confidential ▪ This diagram explains the processing that is available for the WAN to LAN configurations as well as the LAN to WAN configurations in MC-IN-MC NAT mode. ▪ From WAN to LAN De-encapsulation of the packet can be performed ▪ From LAN to WAN Address Translation can be performed as well as packet Encapsulation MC-IN-MC NAT Mode Block Diagram 27Company Confidential ▪ Based on the flow table, this page allows you to group the incoming flows into one or multiple outgoing multicasts ▪ Replicate the same Source IP/Port Number and Destination IP/Port Number across the flows to be encapsulated into the same MC ▪ The flows which have matching Destination IP addresses will be encapsulated into one multicast Web Interface – MC-in-MC NAT Control 28Company Confidential ▪ Configuration is only required for this mode from LAN to WAN ▪ On the Flow Table set the flow(s) to enable for the core on the LAN to WAN side • Then set the Destination IP Address of the stream that will be received to be encapsulated to transmit to the WAN. ▪ On the MC-in-MC NAT Control set the following: • Set the Source IP Address the flow is coming from • Set the Destination IP address to be the multicast address that the stream will output to the WAN with • This can be the same multicast set for multiple flows, and all the flows with that multicast will then be encapsulated into that multicast packet to be transmitted. Configuring MC-in-MC NAT (LAN – WAN) 29Company Confidential ▪ This diagram explains the processing that is available for the WAN to LAN configurations as well as the LAN to WAN configurations in Port Based NAT mode. ▪ Bandwidth Capping will ensure that links do not over-subscribe their contribution limits to a WAN ▪ From WAN to LAN De-encapsulation of the packet can be performed ▪ From LAN to WAN Packet Accumulation, packet Encapsulation and Bandwidth Capping can be performed Port Based NAT Mode Block Diagram 30Company Confidential ▪ Encapsulation header configuration is used to transport all the incoming data (TCP, UDP, etc) into a single Multicast to traverse the WAN ▪ Output Bandwidth configuration allows a max value to be set to prevent spikes on incoming traffic ▪ De-encapsulation configuration would receive the remote multicast to translate back to TCP/UDP traffic Web Interface – Port Based NAT Control 31Company Confidential ▪ Configure the Encapsulation parameters for LAN to WAN for each port • Set the Mode to enable, this will encapsulate all the data passing on this port to be transmitted using the multicast address which gets set • Set the Source IP Address (if applicable) • Set the Destination IP Address, this will be the multicast address that the data will be encapsulated within. • All traffic on this port will be encapsulated into one Transport Stream and transmitted. ▪ Configure the Output Bandwidth as well to the maximum bandwidth for the multicast. Configuring Port-Based NAT (LAN–WAN) 32Company Confidential ▪ Configure the De-Encapsulation parameters for WAN to LAN for each port • Set the Mode to enable, this will de-encapsulated all the data passing on this port • Set the Destination IP Address, this will be the multicast address that the data will be encapsulated within that is being received on this core. ▪ There is no multicast or VLAN Tag filtering available, all the traffic will be de-encapsulated and transmitted to the LAN it is connected to. Configuring Port-Based NAT (WAN–LAN) 33Company Confidential ▪ This diagram explains the De-encapsulation process for the WAN to LAN configurations as well as the Encapsulation process for LAN to WAN configurations in VLAN Based NAT mode. ▪ Each VLAN flow must have a unique Tag value. 2 or more flows cannot share the same VLAN Tag because there is no Packet Replication in VLAN mode. ▪ VLAN mode does not support nested VLAN Tags. The 7880IPG-NAT only supports Ether Type=0x8100 traffic. VLAN Based NAT Mode Block Diagram 34Company Confidential ▪ Allows VLAN ID configuration to encapsulate traffic from a specific VLAN on a trunk port Web Interface – VLAN Based NAT Control 35 ▪ Encapsulation information for the VLAN to be transported on the WAN Company Confidential ▪ Allows for WAN to LAN De-encapsulation configuration for each flow on each of the 6 cores if configured for VLAN Based routing. Web Interface – VLAN Based NAT Control cont. 36Company Confidential ▪ This feature will allow more than one processing core to aggregate its TX traffic to a single WAN port. ▪ As well, it will allow RX traffic from a WAN port to be distributed to all the contributing cores. ▪ Limitations exist where a processing core cannot contribute TX traffic to or receive traffic from more than one WAN port at a time. ▪ Link Aggregation can be used in any of the modes Web Interface – Link Aggregation 37Company Confidential ▪ This feature will allow the user to setup up to 3 pairs of redundant ports from either WAN to LAN or LAN to WAN ▪ As well, it will allow for the configuration of the main port to be copied to the one that is backup • Once a port has been used as a Main/Backup port it cannot be used for another pair ▪ When a failover occurs the Redundancy Mode will read Failover and the Status will read Backup Enabled. ▪ The flows of the main port will be disabled when a failover occurs Web Interface – Link Redundancy 38Company Confidential ▪ Up to 5 TRAP destinations can be set for the NAT module to send Fault data to. ▪ For each of the 12 data ports, the Port Link status can be monitored and configured to send traps if a fault is detected. Web Interface - Notify 39Company Confidential ▪ This page allows for the Import and Export of the configuration files for the device. ▪ The configuration files for each mode can be exported individually. ▪ Configuration files exports as a .csv file, which can be easily edited and utilized. Web Interface – Configuration Management 40Company Confidential ▪ The NAT can be configured for Control through the FC or through the Primary IP address. • If using the Primary IP, set the slot number of the module in the frame. ▪ Each combination of LAN-WAN ports must be configured with the maximum number of streams to be passed. Adding the 7880NAT in Magnum- SDVN 41Company Confidential ▪ Under the Encapsulation IP Addresses set the Destination IP address for each of the streams on all of the Ethernet ports that will be transmitting flows. ▪ These will setup the multicasts for the WAN to LAN configuration on the 7880IPG-NAT Configuring the NAT in Magnum- SDVN 42Company Confidential ▪ Add the links to and from the 7880IPG-NAT to the core ▪ Links directly from the edge devices to the NAT can also be added however Magnum cannot perform those routes Adding Links to the 7880NAT 43Company Confidential ▪ Once configured the NAT can be used to route through the system to any edge device in Magnum- SDVN ▪ When a route is made to the NAT the multicast address will be configured from WAN to LAN under the Flow Table associated to the core that was configured. ▪ NOTE: MAGNUM-SDVN can only control the Flow Table and IP-NAT Control pages on the 7880IPG-NAT. MC-In-MC, Port-based and VLAN-based routing cannot be performed through MAGNUM-SDVN. Routing To/From the NAT 44","libVersion":"0.3.1","langs":""}