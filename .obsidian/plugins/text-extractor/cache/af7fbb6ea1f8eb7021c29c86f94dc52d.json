{"path":"Referenced Material/Reference Library/Vendor/Calrec/OMNEO Resource Guide V1.0.pdf","text":"F.01U.277.626 Rev. 02 JULY/2015 Resource Guide Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 2 OMNEO Resource Guide Table of Contents Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 INTRODUCTION ......................................................................................................................... 3 Features ....................................................................................................................................................4 Requirements ...........................................................................................................................................4 OMNEO NETWORKING OVERVIEW ...................................................................................... 7 Basics of Network Communication: Unicast vs Multicast vs Broadcast ...............................................10 SYSTEM CONFIGURATION ................................................................................................... 11 Switched Networks – how to build a single subnet ...............................................................................11 Determining Subnet Size .......................................................................................................................11 Small Subnets .................................................................................................................................................... 13 Large Subnets .................................................................................................................................................... 14 Quality of Service ..................................................................................................................................15 Error Correction and Redundancy .........................................................................................................16 Glitch Free Audio Redundancy ......................................................................................................................... 16 Rapid Spanning Tree Redundancy .................................................................................................................... 16 Subnet Topologies ..................................................................................................................................17 Daisy Chain Topology ....................................................................................................................................... 17 Star Topology .................................................................................................................................................... 19 Tree Topology ................................................................................................................................................... 21 Mesh Topology .................................................................................................................................................. 23 Routed Networks – How to link suitable subnets ..................................................................................24 Designing a Multi-Subnet OMNEO System ..................................................................................................... 24 Option System Features .........................................................................................................................25 Switched Network – Optional Hardware ........................................................................................................... 25 IGMP version 2 or 3 ....................................................................................................................................... 25 Rapid Spanning Tree Protocol ....................................................................................................................... 26 PIM (Protocol Independent Multicast) ........................................................................................................... 27 Cables ............................................................................................................................................................. 30 OCA Compliance ........................................................................................................................................... 30 Notes ......................................................................................................................................................31 Bosch Security Systems, Inc. Resource Guide 2 OMNEO Resource Guide Rev. 02F.01U.277.626Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 CHAPTER 1 Introduction OMNEO is a media networking architecture for professional applications, developed to achieve better interoperability, usability, and performance given the evolving complexity of modern audio networks. OMNEO uses standard IP over Ethernet, which means it can be implemented using common infrastructure and third party devices. Media products that integrate OMNEO can be assembled into networks of two (2) to 10,000 coorperating devices that exchange studio-quality synchronized multi-channel audio and share a common control system. OMNEO’s media transport technology is Audinate’s Dante, a high-performance standards-based, routable IP media transport system. OMNEO’s system control technology is OCA (Open Control Architecture), an open public standard for control and monitoring of professional media networks. Together, Dante and OCA information are integrated to provide the basis for OMNEO communication. Some OMNEO enabled devices have ported cards, allowing them to transmit and receive two (2) identical encrypted streams of this integrated audio and control information over separate links. Once connected to the network, such devices auto-configure to establish synchronized clocking and efficient communication. OMNEO ensures this communication is secure, redundant, and meets the specific requirements – such as latency – which are important to high performance audio applications. Whether you are highly experienced with digital audio networking or just making the change-over from analog, this guide attempts to explain the basic technological principles behind any OMNEO network and address usability and implementations. 4 Introduction OMNEO Resource Guide Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 Features1 OMNEO couples Audinate’s Dante Audio Transport Protocol with OCA, a proven system control protocol based on work done by the AES (Audio Engineering Society) and now being standardized by the OCA Alliance, to achieve unprecedented reliability and dependability in digital audio. OMNEO allows users and administrators to use highly reliable control and media streams. • Studio quality audio with precision timing and network-wide sync • At least 250 audio channels on gigabit networks • Integrated program transport and system control • Easy network set up by using standard IP network equipment • Open to public standards compliance, when available • Scalability: 2 to 10,000 nodes, local or wide area • High-reliability design for critical applications • Encryption available for secure audio and secure control. Requirements Because OMNEO operates over IP using standard off-the-shelf networking devices, it is compatible with many switches, routers, cables, and other gear you may already have. Telecommunications infrastructure must meet the following basic criteria in order to build a functioning physical network to link OMNEO enabled devices. Devices: • Must be OMNEO enabled Switch: • Switch ports at least 1Gbit/s full-duplex • Edge ports at least 100Mbit/s full-duplex (recommended 1Gbit/s full-duplex) • Non-blocking hardware switching capabilities (no switching in software2) • DiffServ (Differentiated Services) QoS with four (4) or more output queues and strict priority packet scheduling. • No EEE (Energy Efficient Ethernet) or offers the possibility to disable EEE. strongly recommended additional capabilities • SNMPv3 (Simple Network Management Protocol version 3) support • IGMPv2 or IGMPv3 (Internet Group Management Protocol version 2 or 3) snooping (necessary for multicast functionality all but the smallest networks). • RSTP (Rapid Spanning Tree Protocol) support (for redundant networks) 1. Applications utilizing OMNEO media networking technology may choose to not utilize features. Refer to the product documentation. 2. Non-blocking switches have a minimum switching capacity of all combined bandwidth. An 8-port, 1Gb full-duplex switch requires 16Gbs switching capacity. OMNEO Resource Guide Introduction 5 Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 Router: • Switch ports at least 1Gb full-duplex • Supports PIM-DM. PIM-DM is only required when your network contains multiple routers and the application requires multicast audio • Performs IP routing in hardware • DiffServ QoS with four (4) or more output queues and strict priority packet scheduling • Non-blocking backplane per router port • No EEE or offers the possibility to disable EEE • MAC Address Table of 1000 addresses per directly connected subnet Cabling: • CAT5e (minimum to meet edge port connection requirement) • CAT6/6e (minimum to meet 1Gb switch connection requirement, preferred) • CAT7 (suggested for higher connection speeds, preferred for 10Gb connection) • Selections must be made with consideration for maximum length specifications for each cable segment. IMPORTANT: The above materials can be configured in a nearly infinite variety of topologies and configurations to meet the specific needs of your audio network. 6 Introduction OMNEO Resource Guide Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 CHAPTER 2 OMNEO Networking Overview OMNEO is versatile with regard to network size and configuration. A basic unit of any network is a subnet, or group of devices linked together. OMNEO networks may consist of just one subnet, linked by switches, or multiple such subnets connected via one or more routers. Single subnets are limited in size to no more than 450 OMNEO nodes1. If your system exceeds this limit, multiple subnets linked by a router are needed. OMNEO is capable of residing on either small switched or large routed networks. Routed networks have some additional requirements beyond the basic level of set up required for a single switched subnet. This section explains how to set up an OMNEO subnet, the next section discusses how to link subnets into routed networks. 1. More than 128 OMNEO nodes on a single subnet requires additional hardware FIGURE 1. Small Switched Network (Single Subnet) 8 OMNEO Networking Overview OMNEO Resource Guide Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 FIGURE 2. Large Routed Network (Many Subnet Clouds Together) OMNEO Resource Guide OMNEO Networking Overview 9 Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 OMNEO is an audio network technology that uses IP to communicate over common networks. Like all communications over the internet and other common networks, OMNEO communications capabilities are specified by the OSI (Open Systems Interconnection) model. OMNEO messages contain Layer 4 (application), Layer 3 (network), Layer 2 (data link). OMNEO messages can be sent over any copper or fiber medium. The Control piece, OCA, is also supported over on Wi-Fi. Single subnets only require switching of information based on Layer 2 (data link) to operation effectively. However, rout-ability requires Layer 3 (network) information; the network infrastructure must be capable of handling Layer 3 information. Therefore, if your OMNEO system is distributed on a network across different subnets, it is essential your network abides by the requirements described in the “Routed Networks – How to link suitable subnets” on page 24 section, in addition to meeting all the basic switched network requirements. FIGURE 3. OSI Model 10 OMNEO Networking Overview OMNEO Resource Guide Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 Basics of Network Communication: Unicast vs Multicast vs Broadcast There are three (3) common ways to communicate using a modern Ethernet network; Unicast, Multicast, and Broadcast. Unicast. Unicast communication is direct transmission between only two (2) devices, usually a client and a server. In media networks this is used for system control parameters and one-to-one audio streams. Multicast. Multicast communication is transmission from one (1) device to many devices. With this type of communication, any device requesting information from the originator (server) receives the information. Besides the obvious communication path from one (1) to many, multicast communication is usually a one-way path. IGMP can be used the limit the amount of multicast sent out of a management switch link. Once IGMP is enabled, devices should register themselves when they want to receive the multicast group. Multicast traffic on the network for which no registration exists on a certain link, is not forwarded to that link. Broadcast. Broadcast communication is simply nonexclusive multicast communication. In broadcast, a message is transmitted indiscriminately from one (1) device to every device on the subnet. FIGURE 4. Simple Unicast and Multicast Model Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 CHAPTER 3 System Configuration Switched Networks – how to build a single subnet1 A Switched network is any network using network bridges or switches to transfer data/audio from the sender to the recipient. Devices on the subnet may be connected to each other using a switch that operates at Layer 2, the data link layer of the OSI model. This layer provides a framework to transfer data between network devices, encapsulating the physical bits and bytes into coherent packets of information. This chapter explains how to configure a subnet based on its intended size and how to implement features critical to OMNEO at the subnet level. Determining Subnet Size OMNEO subnets fall into two (2) categories: • those containing less than 128 units • those containing from 128 to 450 units 1. A subnet is a logical grouping of connected network devices. Nodes on a subnet tend to be located in close physical proximity to each other on a LAN. 12 System Configuration OMNEO Resource Guide Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 FIGURE 5. Small Subnet (less than 128 OMNEO devices) OMNEO Resource Guide System Configuration 13 Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 Small Subnets Small subnets (128 devices or less) are simple to configure, as they do not require any additional hardware. Each device is capable of communicating directly with any other device on a local link within the subnet. For these small systems, mDNS (Multicast Domain Name System) is used for multicasting, which treats some multicast transmission as broadcast. PTP (Precision Time Protocol) runs automatically, making for a truly plug-and-play experience. If redundancy is required and is achieved using RSTP, only 20 devices may be daisy-chained together in one (1) group, including the root bridge or switch. Consideration for small subnets: • Assume multicast traffic is sent to the complete subnet. • No audio routing outside the network. • Know the channel limits of your network. See Table 1 for bandwidth usage. • Design your network towards the weakest link. The maximum amount of traffic should not exceed 70% of bandwidth of the weakest link. This is particularly important when up-linking switches to other switches. • Analyze your business environment to best understand which system would work best. • Bandwidth of other traffic should also be known or estimated and accounted for in the above calculations. • Limit the maximum number of network hops audio has to pass through the network. Each network hop is adding latency. The advised maximum number of hops is 12. NOTE: Using a separate VLAN for OMNEO can ensure there is no other traffic to consider. Be sure to account for the control traffic needed by the application. FIGURE 6. Large Subnet with ARNI servers (between 128 and 450 devices) 14 System Configuration OMNEO Resource Guide Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 NOTE: These values are correct for an audio link in which one (1) audio is sent to one (1) audio sink (unicast). For multicast only, the 1 ms and 2 ms values are applicable. Large Subnets Large subnets (128-450 devices) are more complicated to configure because they require additional hardware to provide IP Addresses using DHCP (Dynamic Host Configuration Protocol), to act as a PTP (Precision Time Protocol) source, and to handle unicast DNS-SD (Domain Name System Service Directory) instead of multicast DNS, because it is impractical to flood a large subnet with DNS-SD traffic. In order to manage DNS-SD and PTP traffic, a dedicated OMNEO server is required. This server, called ARNI (Audio Routed Network Interface), is capable of handling DHCP assignments to a single subnet. However, a third party server may be used to handle DHCP as long as it is capable of assigning all units in the subnet an IP Address within two (2) seconds. ARNI devices are the recommended multi-functional solution because it is optimized for this high performance requirement and required for delegation of DNS-SD traffic and as a PTP server. The ARNI can be configured using the ARNI Configuration Tool. Basic diagnostics are available by enabling a diagnostics website (with user name/password) in the ARNI using the ARNI configuration tool. There are two (2) types of ARNI devices available; ARNI-E (Enterprise) and ARNI-S (Standard). An ARNI-E can be configured as a multi-subnet master device, while an ARNI-S can serve a standalone system or slave a full subnet to an ARNI- E. Consideration for large subnets: • When an IGMP querier is available and IGMP snooping is enable on all network equipment, multicast traffic is only sent to the actual receivers. • Know the channel limits of your network. See Table 1 for bandwidth usage. • Design you network towards the weakest link. The maximum amount of traffic should not exceed 70% of bandwidth of the weakest link. This is particularly important when up-linking switches to other switches. • Analyze your business environment to best understand which system would work best. • Bandwidth of other traffic should also be known or estimated and accounted for in the above calculations. NOTE: • The default configuration for a single subnet system can only be used with a standalone system. • For increased reliability and consistency, two (2) redundant ARNIs may be used per subnet. Table 1: Bandwidth Usage Rx Latency 48 kHz/24-bit 48 kHz/secure 96 kHz/24-bit 96 kHz/secure 0.25 ms 8.352 Mbit/s 8.736 Mbit/s 16.7 Mb/s 17.47 Mbit/s 0.5 ms 4.75 Mbit/s 5.14 Mbit/s 9.50 Mbit/s 10.27 Mbit/s 1 ms 2.95 Mbit/s 3.34 Mbit/s 5.904 Mbit/s 6.672 Mbit/s 2 ms 2.05 Mbit/s 2.44 Mbit/s 4.10 Mbit/s 4.872 Mbit/s OMNEO Resource Guide System Configuration 15 Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 Quality of Service In an OMNEO network, QoS (Quality of Service) is used to prioritize the transit of packets containing time-sensitive information, like audio. This is achieved using a mechanism known as DiffServ (Differentiated Services), where each packet is given a priority code it carries through the system to alert switches and other devices of its importance. Each code, known as a DSCP (Differentiated Service Code Point), has a value ranging from zero (0) to 63. Higher number indicate higher priority. IMPORTANT: In order to achieve the intended QoS and maintain low latency performance, OMNEO switches and routers must have four (4) or more output queues with a strict priority packet scheduling component enabled. This ensures packets with the highest priority have shorter lines as they make their way through the system, increasing the chance of reaching their destination on time. The suggested default configuration of switches in an OMNEO network is as follows: 1. Highest priority queue holds all packets DSCP 56 2. Next queue holds all packets  DSCP 46 3. Next queue holds all packets  DSCP 8 4. Last queue holds all packets received Experienced system engineers can use their discretion to customize switch QoS settings for optimal performance. When using custom settings, the highest priority queue range must include DSCP 56, which contains OMNEO PTP for accurate clocking. The second highest priority queue rand must include DSCP 46, which OMNEO uses to transmit audio traffic and time insensitive PTP traffic. The third highest priority range must include DSCP 8, which currently is reserved for future traffic. See switch specification and user guidelines for information on accessing and changing these settings. By restricting some queues to handle only high priority packets, these settings ensure high priority packets are given every opportunity to be sent along as quickly as possible, while lower priority packets (like non-audio messages), which are less time-sensitive, might be forced to wait slightly longer. CAUTION: If all traffic uses high DSCP values, QoS becomes useless. The value in QoS is the ability to assign relatively disparate priority value to different classes of information. Because of this, it is important to plan QoS implementation carefully. This is especially important to remember when sharing a network with other systems and applications, which may have independent implementations of QoS. Verify other messages on the network do not have high DSCP values that could interfere with time-sensitive OMNEO information. NOTE: Using a separate VLAN for OMNEO can ensure no other traffic from other applications within an OMNEO subnet. OMNEO’s implementation of QoS has additional advantages. By putting fixed DSCPs into the header of a packet, as described above, network devices can run a DiffServ calculation rule to determine whether the DSCP value match expected values. This can detect data corruption or system inconsistencies and help with debugging by analyzing the different output queue statistics in a running system. Audio queues may never drop packets since this leads to audio distortion. 16 System Configuration OMNEO Resource Guide Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 Error Correction and Redundancy Glitch Free Audio Redundancy Glitch free audio redundancy is a failover protection ensuring audio is robust against network failover, even when one (1) source fails. To achieve glitch-free audio redundancy and entirely redundant network structure is required, with multiple Ethernet connections and separate subnets. However, to have glitch-free redundant audio, you cannot daisy chain units across the subnet. Audio is sent and received on all the connections, eliminating the possibility of connections to other devices in a chain. If one connection is lost, the audio stream is still received through the second connection, meaning no information is lost. Restrictions • Only works for audio, transmission of control information is not redundant. Therefore, in the event of failover, settings cannot be changed until the primary link has been repaired, but audio continues to transmit/play. Considerations • A redundant system doubles the required network and installation components. Rapid Spanning Tree Redundancy Rapid spanning tree is an Ethernet redundancy protocol which eliminates redundant links in the network, and re-establishes the link in case the primary link is interrupted. This is performed by calculating a spanning tree in the network. OMNEO devices might support rapid spanning tree as an alternative to glitch free redundancy. Refer to the product documentation. In most situations, Rapid Spanning Tree recovers from a network interruption within a few hundred milliseconds. Rapid Spanning Tree works both for audio and control data. FIGURE 7. Glitch Free Audio Redundancy Example OMNEO Resource Guide System Configuration 17 Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 Restrictions • the depth of the Spanning Tree is limited. The number of hops from the root bridge cannot be over 20 hops. • OMNEO requires a specific RSTP setting on every network component. • The RTSP hello time parameter should be modified to nine (9) seconds. • The forwarding delay parameter to 30 seconds. The max age parameter to 22 seconds. • These parameters are modified from default to create a fault tolerant network which matches the OMNEO requirements. • Although RSTP is backwards compatible with the older Spanning Tree, the use of Spanning Tree is strongly discouraged because of poor converge times. • OMNEO devices are in most systems are not suitable root bridges, therefore the root priority of an OMNEO devices are below default. The root priority depends on the product between 45056 and 61440 (default RSTP root priority is 32768, the higher the priority number, the lower the priority). A root bridge and backup root bridge should be picked carefully when designing an Ethernet network. Considerations • A system redundancy setup achieved by using RSTP only adds a limited amount of additional cabling. The network should be designed carefully. Subnet Topologies Network Topology refers to the physical configuration of linked devices. Meaning, it is the answer to which devices are connected to which other devices and how they are connected. When deciding how to structure a given subnet, it is important to consider performance goals for the system. Some offer simplicity at the expense of robustness, others offer robustness at the expense of cost and speed. Daisy Chain Topology A Daisy Chain topology is a basic wiring scheme in which multiple device are wired together in sequence or in a ring. Depending on the size of the chain and the system components used in the subnet, a daisy chain may directly be connected to 18 System Configuration OMNEO Resource Guide Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 an OMNEO controller, as shown in Figure 8 or connected to a network switch. Daisy chains are recommended for very small systems. Advantages of the daisy chain topology: • simple to create • easy to maintain • minimal cables used in installation • minimal use of network component in installation • cost effective redundancy solution FIGURE 8. Daisy Chain Non-Redundant FIGURE 9. Daisy Chain Redundant OMNEO Resource Guide System Configuration 19 Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 Disadvantages of the daisy chain topology: • without redundancy, if one (1) device or network component fails, all connected devices become disconnected • if switch port security is needed, the configuration becomes more complex • if PoE (Power Over Ethernet) is necessary, special equipment is needed • only small configurations are allowed Considerations for redundancy • Cost effective redundancy solution, in case the OMNEO controller has multiple Ethernet interfaces, with no additional hardware required. Star Topology In Star Topology, every node is connected to a central node called a switch. Depending on the installation and application requirements, the star may or may not be redundant, as shown in Figure 10. Star topologies are recommended when an out-of- the-box PoE solution is required or when redundancy is important. FIGURE 10. Star Topology Non-Redundant 20 System Configuration OMNEO Resource Guide Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 Advantages of the star topology: • better fault tolerance. Link failure affects only a single device, the rest of the network is not subject to the failover. • Fewer points of failure between devices. • Easy configuration of port security. • The maximum number of network hops is very small from device to device. In this setup a low latency audio can be used. Disadvantages of the star topology: • More intensive cabling set up and maintenance • Does not scale well without needing much network equipment • Increased cost of additional cables and switches Consideration for Redundancy Decision • Costly, however the redundancy solution protects against many failures. FIGURE 11. Star Topology Redundant OMNEO Resource Guide System Configuration 21 Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 Tree Topology In Tree topology, a tree is created with network switches with devices connected to the leaf. The OMNEO controller might be connected as a leaf node or might be connected to the root switch. A tree topology can be made redundant, as shown in Figure 12. FIGURE 12. Tree Non-Redundant 22 System Configuration OMNEO Resource Guide Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 Advantage of the tree topology: • Easy to extend (when no redundancy is required) • If one segment is damaged, other segments are not affected, when redundant • Maximum number of hops stay equal when expanding the system • Large configurations are possible. Disadvantages of the tree topology: • Requires a lot of cabling to be fully redundant in a large tree. • If one segment is damaged, the whole segment is disconnected, in case no redundancy is applied. • The root switch can become a bandwidth bottleneck. 10Gb/s is advised for links connected to the root switch. Considerations for the Redundancy Decision • Redundancy solution is possible, but requires a lot of additional cabling and switches on the network components. FIGURE 13. Tree Redundant OMNEO Resource Guide System Configuration 23 Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 Mesh Topology In Mesh topology, different topologies are combined, typically in a mesh configuration. The advantages of the different topologies are combined to get a cost optimized, redundant solution, which can easily be extended. Mesh topologies are numerous in combinations and size, as shown in Figure 14. Advantages of the mesh topology: • If one segment is damaged, other segments are not affected. • Maximum number of hops stay equal when expanding the system. • Large configurations are possible. Disadvantages of the mesh topology: • May be difficult to maintain. A detailed network diagram is required. Considerations for the Redundancy Decision • Apply the redundancy solution which is required according to the installation and/or application. FIGURE 14. Mesh Half-Redundant 24 System Configuration OMNEO Resource Guide Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 Routed Networks – How to link suitable subnets A Routed Network is any network with multiple subnets connected together by one (1) or more IP routers. OMNEO can operate on routed networks of up to 40 different subnets. However, OMNEO does not support Wide Area Networking. The end-to-end latency and jitter should be within the audio latency specifications. To be compatible with OMNEO, routers must have the following: • 1Gbit/s or higher Ethernet ports. • Support PIM-DM or Bi-Directional PIM when the application requires multicast audio. • Perform IP routing in hardware to minimize routing delay (also known as layer 3 switch). • Have a packet forwarding rate greater than one million packets per second per port (> 1,000,000pct/s/port) • Non-blocking backplane per switching port (2 Gbit/s per port required) • Be able to a MAC Address table of at least 1000 addresses per directly connected subnet. Designing a Multi-Subnet OMNEO System A Multi-Subnet OMNEO system is subject to the following: • 2 – 40 subnets • The combined OMNEO system can have up to 10,000 OMNEO devices attached to it at any one time. • An ARNI-E or ARNI-S can serve a total of 450 OMNEO devices; as such a single subnet cannot exceed 450 OMNEO devices.1 • Subnets with over 100 devices require an ARNI-S or ARNI-E. Subnets under 100 devices do not require an ARNI. The combined number of devices in subnets without an ARNI and the devices in the ARNI-E subnet cannot exceed the 450 device restriction. • One (1) ARNI-E and zero (0) or more ARNI-S are required. • At least one (1) IP router is needed to link subnets. • Subnets are limited to privately owned and maintained networks (wide area networks are not supported). • A multi-subnet requires servers to limit the multicast traffic. • DHCP Server – ARNI or external (DHCP service is enabled by default, can be disabled with the ARNI Configuration tool). • DNS Server – must be ARNI (delegation can be configured with the ARNI configuration tool by configuring a DNS parent address). • PTP Server – must be ARNI, boundary clock in small subnets is automatically designated. The most important thing to remember when using OMNEO over a routed network is that each subnet on the network, in addition to having all the capabilities described in the “single subnet” guidelines., must also operate fully at the Layer 3 level. If all gear in the subnets is capable of using Layer 3 protocol and information, and the routers and connections between subnets fulfill the requirements listed here, then and only then is the system capable of routing OMNEO information to any OMNEO device on the network. 1. Some OMNEO nodes count as two (2) OMNEO devices, refer to the application specification for more information. OMNEO Resource Guide System Configuration 25 Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 Option System Features Switched Network – Optional Hardware IGMP version 2 or 3 IGMP (Internet Group Management Protocol) is a communications protocol where multicast group memberships are established. IGMP supports a more efficient use of bandwidth resources when using multicast streaming audio and video. IGMP can be used to control where Multicast1traffic is allowed to propagate. Since OMNEO uses multicast communication, it is necessary the network equipment supports the IGMP V2/V3 protocol. Support in the router is mandatory to be able to route multicast traffic between the subnets. Switches supporting IGMP snooping helps to reduce the network load by only forwarding the traffic to destinations using multicast traffic. For performance reasons, it is required the switch has hardware IGMP snooping support; not only software snooping. It must be able to handle hundreds of IGMP join/leave messages per second. IGMP operates between the client and local multicast router. Switches featuring IGMP snooping derive useful information by observing these IGMP transactions and forwarding them on the multicast router port. PIM (Protocol Independent Multicast) is used between the local and remote multicast routers, to direct multicast traffic from the multicast server to many multicast clients. IGMP operates above the network layer, though it does not actually act as a transport protocol. 1. For more information, see “OMNEO Networking Overview” on page 7 Table 2: Issues with IGMP Snooping Issue Resolution Multicast Router (IGMP Querier) required, what about single subnets 1. IGMP Querier functionality added to ARNI. 2. Some Ethernet switches implement IGMP Querier Function. Multicast table is not updated when RSTP recalculates the tree, causing audio disturbance of up to the querier level. 1. Wait for a better IGMP snooping implementation. 2. If you want support for IGMP snooping on a single subnet which does not have a router, which supports IGMP, it is necessary to add an IGMP querier. It is possible to use the ARNI as an IGMP querier. Table 3: Issues with IGMP Snooping Issue Resolution Switch has limited capacity for snooping IGMP messages as this is done in software, meaning it could miss messages 1. Use a switch with hardware support for IGMP snooping. 2. Use a switch with more entries than the maximum audio channels available in your network. Multicast table is limited in size, meaning snooping only works for a limited number of audio streams. 1. Wait for better IGMP snooping implementation. 2. Use a switch with more entries than the maximum audio channels available in your network. A delay exists when starting a multicast route over an IP router. > Upgrade your router SW to the latest version. 26 System Configuration OMNEO Resource Guide Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 Rapid Spanning Tree Protocol NOTE: OMNEO devices may or may not support RSTP. Consult the product documentation for further details. RSTP (Rapid Spanning Tree Protocol) is an IEEE standardized network protocol (802.1w) ensuring a loop-free topology for any Ethernet LAN (Local Area Network) evolved from STP (Spanning Tree Protocol). OMNEO fully supports RSTP IEEE802.1w. When using switches that also support this, it is possible to create redundancy loops even with daisy-chained devices. It is needed to adjust the RSTP parameters of the switch to do this according to the following: • Hello Time: 9 seconds • Maximum Age: 22 seconds • Forward Delay: 30 seconds This is supported by the major brand switches. The Root Bridge of a Spanning Tree is automatically elected by means of the root priority. When all root priorities in a system are equal, the MAC Address of the system is used as a determiner. In general, OMNEO devices are not meant to become a root bridge, therefore, by default, the root bridge priority advertised is a higher root bridge priority value (less important) than other network equipment. The OMNEO RSTP Root Bride Priority is between 45056 and 61440 (default RSTP root priority is 32768) depending on the product. When using RSTP care must be taken when designing the network. The maximum age parameter defines the maximum number of hops, seen from the Root Bridge; the spanning tree information is valid and can be used. Devices which are not in range of this specified maximum age are not part of the spanning tree and are not reachable in the network. RSTP uses a mechanism to calculate a spanning tree in a redundant connected network, each network device searches for the shortest path to the root bridge, offers this path to other devices, and administers which path can be used as an alternative path. Ports are assigned this role, see Figure 15. If a root port fails, an alternate port is used as the new root port. If there is no alternate port available, a new spanning tree is calculated. RSTP is useful within OMNEO when connecting OMNEO devices redundantly (for example in a daisy chain or when connecting OMNEO devices to different switches for a redundancy scheme to limit the audio loss to less than 100ms). IMPORTANT: If devices do not support RSTP, chains of devices may not be connected redundantly. This means audio is lost for a longer duration of time if a link fails inside the daisy chain. When the link is restored, a loop is created for a few seconds. The loop created could flood your network. FIGURE 15. RSTP Architecture OMNEO Resource Guide System Configuration 27 Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 PIM (Protocol Independent Multicast) PIM is a routing protocol that works between routers. It is required to be able to route multicast audio between routers. It isn’t needed if the multi-subnet has only one (1) router – in this instance, the router needs only support for IGMP. PIM is not needed for other multicast traffic, for example, routed OMNEO systems do not use mDNS and PTP is handled by ARNI. There are different types of PIM: PIM-SM (PIM Sparse Mode) In PIM-SM, one (1) or more routers are configured as a RP (Rendezvous Point). A rendezvous point is used as a temporary way to connect a would-be multicast receiver to an existing shared multicast tree passing through the rendezvous point. The multicast source is registered with the RP by the router that has the source on its directly connected subnet. The multicast router that receives an IGMP join asks the RP where the source is located. The receiving routers sets up a path to the source router using the PIM messages. FIGURE 16. PIM-SM Example Advantages Disadvantages • Scales well in Wide Area Network • Well-supported by routers • Each multicast router requires additional configurations (RPs) • Not suited for dynamic systems where sources change • If source is not registered yet, IGMP join does not lead to audio being sent through • Multicast groups by only have one (1) source 28 System Configuration OMNEO Resource Guide Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 PIM-DM (PIM Dense Mode) PIM-DM builds the shortest path by flooding the multicast traffic domain wide, and then cuts the branches of the network tree where no receivers are present. PIM-DM is straightforward to implement but generally has poor scaling properties. NOTE: If your network can support the extra traffic when new multicast senders are created, this solution is preferred because of simplicity and performance. FIGURE 17. PIM-DM Example Advantages Disadvantages • No additional router configuration needed, apart from enabling PIM-DM • Fast distribution of the multicast audio • Suitable for systems with dynamic audio routing • Well supported by routers • Multicast groups may only have one (1) source • Does not scale well in wide area networks (flooding) • For example, Internet or leased lines with limited bandwidth OMNEO Resource Guide System Configuration 29 Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 Bi-Directional PIM Bi-directional PIM is a combination of PIM-SM and PIM-DM. It explicitly builds shared bi-directional trees. It never builds a shortest path tree, so may have longer end-to-end delays than PIM-SM, but scales well because it needs no source-specific state. This solution is preferred because of its simplicity and performance, if your network can handle the extra traffic when new multicast sends are added. PIM-SSM (PIM Source Specific Multicast) PIM-SSM is similar to PIM-SM with some additional functionality. It builds trees rooted in just one (1) source, offering a more secure and scalable model for a limited amount of applications (mostly broadcasting of content). The source router passes the address of the source device when registering the device. When receive devices join a group, they pass the address of the source device. The RP router stores both the source address and the multicast address, allowing for multiple sources using the same multicast address. FIGURE 18. Bi-Directional PIM Example 30 System Configuration OMNEO Resource Guide Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 Cables OCA Compliance In order to qualify as OMNEO compliant, devices meet the minimum level of control communication by supplying all the criteria listed in the specification for a minimum object class implementation, according to the OCA specification. For interoperability reasons, some products offer an OCA implementation chart which can be used during system integration. Table 4: Recommended Minimum cables to use with OMNEO Cable Type Description Cat 5e (minimum) This type of cable is used in structured cabling for computer networks such as Ethernet. The cable standard provides performance of up to 100 MHz and is suitable for 10BASE-T, 100BASE-TX (Fast Ethernet), and 1000BASE-T (Gigabit Ethernet) Cat 6/6e (recommended) This type of cable is a standard for Gigabit Ethernet and other network physical layers. It is backwards compatible with the Category 5/5e and Category 3 cable standards. Compared with Cat 5 and Cat 5e, Cat 6 features more stringent specifications for crosstalk and system noise. The cable standard provides performance of up to 250 MHz and is suitable for 10BASE-T, 100BASE-TX (Fast Ethernet), 1000BASE-T (Gigabit Ethernet), and 10GBASE-T (10-Gigabit Ethernet) Cat 7 (to be used with 10GB networks) This type of cable is used as a cabling infrastructure for 1000BASE-T (Gigabit Ethernet or GbE) and 10GBASE-T (10-Gigabit Ethernet or 10 GbE) networks. The Cat 7 standard pro- vides performance of up to 600 MHz (1000 MHz for the Cat-7am or Augmented Category 7 standard) and can be used up to a maximum length of 100 meters. Category 7 cable is able to achieve higher performance than preceding Ethernet standards such as Cat 5, Cat 5e, and Cat 6 by requiring each of its twisted wire pairs to be fully shielded. OMNEO Resource Guide System Configuration 31 Bosch Security Systems, Inc. Resource Guide F.01U.277.626 Rev. 02 Notes","libVersion":"0.3.1","langs":""}